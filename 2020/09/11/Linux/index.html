<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux | 灵熙云工作室</title><meta name="robots" content="noindex"><meta name="description" content="本文所有示例均在CentOS发行版上完成 虚拟机的安装（未完成）常用命令在日常运维管理工作中，快捷键可以大大提高工作效率。 快捷键 Ctrl十C:结束(终止)当前命令。如果你输人了一大串字符，但不想运行，可以按Ctrl+C组合键，此时光标将跳人下一行.而在刚刚的光标处会留下一个^C的标记. Tab:实现自动补全功能。这个键比较重要，使用频率也很高。当你输人命令、文件或目录 的前几个字符时，它会自动"><meta name="keywords" content="Linux"><meta name="author" content="灵熙云,minkeyto@qq.com"><meta name="copyright" content="灵熙云"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/file/favicon.png"><link rel="canonical" href="http://www.goitman.cn/2020/09/11/Linux/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="Linux"><meta property="og:url" content="http://www.goitman.cn/2020/09/11/Linux/"><meta property="og:site_name" content="灵熙云工作室"><meta property="og:description" content="本文所有示例均在CentOS发行版上完成 虚拟机的安装（未完成）常用命令在日常运维管理工作中，快捷键可以大大提高工作效率。 快捷键 Ctrl十C:结束(终止)当前命令。如果你输人了一大串字符，但不想运行，可以按Ctrl+C组合键，此时光标将跳人下一行.而在刚刚的光标处会留下一个^C的标记. Tab:实现自动补全功能。这个键比较重要，使用频率也很高。当你输人命令、文件或目录 的前几个字符时，它会自动"><meta property="og:image" content="https://i.loli.net/2020/09/12/zX7IvHtJAscUmhe.jpg"><meta property="article:published_time" content="2020-09-11T07:56:15.466Z"><meta property="article:modified_time" content="2021-07-21T07:32:02.579Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?5c009f46ba6df7bc385f101477536214";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2021-07-21 15:32:02'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="/css/effect.css"><meta name="generator" content="Hexo 4.2.1"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/file/head.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">16</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">49</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-file"></i><span> 专题笔记</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2020/08/17/Redis/"><i class="fa-fw fa fa-book"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-users"></i><span> 友链&amp;留言板</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#虚拟机的安装（未完成）"><span class="toc-number">1.</span> <span class="toc-text">虚拟机的安装（未完成）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#常用命令"><span class="toc-number">2.</span> <span class="toc-text">常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#快捷键"><span class="toc-number">2.1.</span> <span class="toc-text">快捷键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看命令man"><span class="toc-number">2.2.</span> <span class="toc-text">查看命令man</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ls命令"><span class="toc-number">2.3.</span> <span class="toc-text">ls命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关机和重启"><span class="toc-number">2.4.</span> <span class="toc-text">关机和重启</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文件和目录管理"><span class="toc-number">3.</span> <span class="toc-text">文件和目录管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#系统目录结构"><span class="toc-number">3.1.</span> <span class="toc-text">系统目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绝对路径和相对路径"><span class="toc-number">3.2.</span> <span class="toc-text">绝对路径和相对路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文件属性"><span class="toc-number">3.3.</span> <span class="toc-text">文件属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#文件后缀名"><span class="toc-number">3.4.</span> <span class="toc-text">文件后缀名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#环境变量PATH"><span class="toc-number">3.5.</span> <span class="toc-text">环境变量PATH</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建与删除"><span class="toc-number">3.6.</span> <span class="toc-text">创建与删除</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令cd：切换"><span class="toc-number">3.6.1.</span> <span class="toc-text">命令cd：切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令mkdir：创建"><span class="toc-number">3.6.2.</span> <span class="toc-text">命令mkdir：创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令rmdir：删除空目录"><span class="toc-number">3.6.3.</span> <span class="toc-text">命令rmdir：删除空目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令rm：删除"><span class="toc-number">3.6.4.</span> <span class="toc-text">命令rm：删除</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#复制与移动"><span class="toc-number">3.7.</span> <span class="toc-text">复制与移动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令cp：复制"><span class="toc-number">3.7.1.</span> <span class="toc-text">命令cp：复制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令mv：移动"><span class="toc-number">3.7.2.</span> <span class="toc-text">命令mv：移动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看文档内容"><span class="toc-number">3.8.</span> <span class="toc-text">查看文档内容</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令cat：查看"><span class="toc-number">3.8.1.</span> <span class="toc-text">命令cat：查看</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令tac：倒序查看"><span class="toc-number">3.8.2.</span> <span class="toc-text">命令tac：倒序查看</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令more：搜索查看"><span class="toc-number">3.8.3.</span> <span class="toc-text">命令more：搜索查看</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令less：查看搜索"><span class="toc-number">3.8.4.</span> <span class="toc-text">命令less：查看搜索</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令head：查看内容前几行"><span class="toc-number">3.8.5.</span> <span class="toc-text">命令head：查看内容前几行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令tail：查看内容最后几行"><span class="toc-number">3.8.6.</span> <span class="toc-text">命令tail：查看内容最后几行</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更改文档权限"><span class="toc-number">3.9.</span> <span class="toc-text">更改文档权限</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令chgrp：更改所属组"><span class="toc-number">3.9.1.</span> <span class="toc-text">命令chgrp：更改所属组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令chown：更改所有者"><span class="toc-number">3.9.2.</span> <span class="toc-text">命令chown：更改所有者</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令chmod：更改读写权限"><span class="toc-number">3.9.3.</span> <span class="toc-text">命令chmod：更改读写权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令chattr：修改文件-目录特殊属性"><span class="toc-number">3.9.4.</span> <span class="toc-text">命令chattr：修改文件&#x2F;目录特殊属性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#搜索文档"><span class="toc-number">3.10.</span> <span class="toc-text">搜索文档</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令which：查找可执行文件的绝对路径"><span class="toc-number">3.10.1.</span> <span class="toc-text">命令which：查找可执行文件的绝对路径</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令find：搜索文件"><span class="toc-number">3.10.2.</span> <span class="toc-text">命令find：搜索文件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#常用参数"><span class="toc-number">3.10.2.1.</span> <span class="toc-text">常用参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#常用选项"><span class="toc-number">3.10.2.2.</span> <span class="toc-text">常用选项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#链接文件"><span class="toc-number">3.11.</span> <span class="toc-text">链接文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令ln：建立链接"><span class="toc-number">3.11.1.</span> <span class="toc-text">命令ln：建立链接</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#硬链接特性"><span class="toc-number">3.11.1.1.</span> <span class="toc-text">硬链接特性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#软链接特性"><span class="toc-number">3.11.1.2.</span> <span class="toc-text">软链接特性</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#系统用户与用户组管理"><span class="toc-number">4.</span> <span class="toc-text">系统用户与用户组管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#最重要的两个文件"><span class="toc-number">4.1.</span> <span class="toc-text">最重要的两个文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#etc-passwd"><span class="toc-number">4.1.1.</span> <span class="toc-text">&#x2F;etc&#x2F;passwd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#etc-shadow"><span class="toc-number">4.1.2.</span> <span class="toc-text">&#x2F;etc&#x2F;shadow</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户和用户组管理"><span class="toc-number">4.2.</span> <span class="toc-text">用户和用户组管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令groupadd：新增组"><span class="toc-number">4.2.1.</span> <span class="toc-text">命令groupadd：新增组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令groupdel：删除组"><span class="toc-number">4.2.2.</span> <span class="toc-text">命令groupdel：删除组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令useradd：增加用户"><span class="toc-number">4.2.3.</span> <span class="toc-text">命令useradd：增加用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令userdel：删除用户"><span class="toc-number">4.2.4.</span> <span class="toc-text">命令userdel：删除用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户密码管理"><span class="toc-number">4.3.</span> <span class="toc-text">用户密码管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令passwd：设置密码"><span class="toc-number">4.3.1.</span> <span class="toc-text">命令passwd：设置密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令mkpasswd：密码生成"><span class="toc-number">4.3.2.</span> <span class="toc-text">命令mkpasswd：密码生成</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#用户身份切换"><span class="toc-number">4.4.</span> <span class="toc-text">用户身份切换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#命令su：切换用户身份"><span class="toc-number">4.4.1.</span> <span class="toc-text">命令su：切换用户身份</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#命令sudo："><span class="toc-number">4.4.2.</span> <span class="toc-text">命令sudo：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#不允许root直接登录Linux"><span class="toc-number">4.4.3.</span> <span class="toc-text">不允许root直接登录Linux</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文本编辑工具Vim"><span class="toc-number">5.</span> <span class="toc-text">文本编辑工具Vim</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#一般模式"><span class="toc-number">5.1.</span> <span class="toc-text">一般模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编辑模式"><span class="toc-number">5.2.</span> <span class="toc-text">编辑模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#命令模式"><span class="toc-number">5.3.</span> <span class="toc-text">命令模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文档压缩与打包"><span class="toc-number">6.</span> <span class="toc-text">文档压缩与打包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#gzip压缩工具"><span class="toc-number">6.1.</span> <span class="toc-text">gzip压缩工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bzip2压缩工具"><span class="toc-number">6.2.</span> <span class="toc-text">bzip2压缩工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#xz压缩工具"><span class="toc-number">6.3.</span> <span class="toc-text">xz压缩工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tar打包工具"><span class="toc-number">6.4.</span> <span class="toc-text">tar打包工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#exclude选项"><span class="toc-number">6.4.1.</span> <span class="toc-text">exclude选项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用gzip压缩"><span class="toc-number">6.4.2.</span> <span class="toc-text">使用gzip压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用bzip2压缩"><span class="toc-number">6.4.3.</span> <span class="toc-text">使用bzip2压缩</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zip压缩工具"><span class="toc-number">6.5.</span> <span class="toc-text">zip压缩工具</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#压缩"><span class="toc-number">6.5.1.</span> <span class="toc-text">压缩</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#解压"><span class="toc-number">6.5.2.</span> <span class="toc-text">解压</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#zcat、bzcat命令"><span class="toc-number">6.6.</span> <span class="toc-text">zcat、bzcat命令</span></a></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/09/12/zX7IvHtJAscUmhe.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">灵熙云工作室</a></span><span class="pull-right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-file"></i><span> 专题笔记</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/2020/08/17/Redis/"><i class="fa-fw fa fa-book"></i><span> Redis</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-users"></i><span> 友链&amp;留言板</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">Linux</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-09-11 15:56:15"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-09-11</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-07-21 15:32:02"><i class="fas fa-history fa-fw"></i> 更新于 2021-07-21</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta__icon"></i><span>字数总计:</span><span class="word-count">13.6k</span><span class="post-meta__separator">|</span><i class="far fa-clock fa-fw post-meta__icon"></i><span>阅读时长: 49 分钟</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span><span class="post-meta__separator">|</span><i class="far fa-comments fa-fw post-meta__icon"></i><span>评论数:</span><a href="/2020/09/11/Linux/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/2020/09/11/Linux/" itemprop="commentCount"></span></a></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>本文所有示例均在CentOS发行版上完成</p>
<h2 id="虚拟机的安装（未完成）"><a href="#虚拟机的安装（未完成）" class="headerlink" title="虚拟机的安装（未完成）"></a>虚拟机的安装（未完成）</h2><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><p>在日常运维管理工作中，快捷键可以大大提高工作效率。</p>
<h3 id="快捷键"><a href="#快捷键" class="headerlink" title="快捷键"></a>快捷键</h3><ul>
<li>Ctrl十C:结束(终止)当前命令。如果你输人了一大串字符，但不想运行，可以按Ctrl+C组合键，此时光标将跳人下一行.而在刚刚的光标处会留下一个^C的标记.</li>
<li>Tab:实现自动补全功能。这个键比较重要，使用频率也很高。当你输人命令、文件或目录 的前几个字符时，它会自动帮你补全。</li>
<li>Ctl+D:退出当前终端。同样，你也可以愉人命令exit实现该功能。</li>
<li>Ctrl+Z:暂停当前进程。这和Ctrl+C是有去区别的，暂停后，使用fg命令恢复该进程。</li>
<li>Ctrl+L:清屏，使光标移动到屏幕的第一行。当命令和显示的结果占满整个屏幕时.我们每运行一个命令.都会在最后一行显示，这样看起来不太方便.此时就可以使用这个快捷键.让光标移动到屏幕第一行，也就是所谓的清屏。</li>
<li>Ctl+A:可以让光标移动到命令的最前面。有时候一条命令很长，快敲完时现前面某个字母不对，此时可以直接用这个快捷键把光标定位到行首，然后再用左右方向键微调光标的位置。</li>
<li>Ctl+E:可以让光标移动到最后面，作用同上。</li>
</ul>
<h3 id="查看命令man"><a href="#查看命令man" class="headerlink" title="查看命令man"></a>查看命令man</h3><p>man：用于查看命令的帮助文档，其格式为man 命令。例如如下命令:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># man ls</span></span><br></pre></td></tr></table></figure>
<p>如果屏幕不能显示完整，可以按空格键下翻，或者按上下方向键前后移动文本。若想退出帮助文档，按字母键q。</p>
<h3 id="ls命令"><a href="#ls命令" class="headerlink" title="ls命令"></a>ls命令</h3><p>ls是list的缩写，该命令用于列出指定目录或者文件</p>
<ul>
<li>后面不加任何选项也不跟目录名或者文件名：会列出当前目录下的文件和目录。不包含隐藏文件。</li>
<li>后面加-a选项、不加目录名或者文件名：会列出当前目录下所有文件和日录，含有隐藏文件。</li>
<li>后面加-l选项、不加目录名或者文件名：会列出当前目录下除隐藏文件外的所有文件和日录的详细信息。包含其权限、所属主、所属组以及文件创建日期和时间<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/08/27/Tg6iXdmxHsFavcC.png" alt=""></li>
<li>后面不加选项、只跟文件名:会列出该文件，使用时通常都是加上-1选项。用来查看该文件的详细信息。</li>
<li>后面不加选项、只跟目录名:会列出指定目录下的文件和目录。</li>
</ul>
<h3 id="关机和重启"><a href="#关机和重启" class="headerlink" title="关机和重启"></a>关机和重启</h3><p>如果要关机或重启，必须要保证当前系统中没有其他用户在登录系统。可使用who命令查看是否还有其他人在登录，或者使用命令ps -aux查看是否还有后台进程运行。<br>关机的命令有shutdown -h now、halt、poweroff、init 0，重启系统的命令有shutdown -r now、reboot、init 6，例如</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># shutdown -h 10  	#计算机将在10分什后关机，且会显示在登录用户的当前屏幕中</span></span><br><span class="line"><span class="meta"># shutdown -h now  	#立即关机</span></span><br><span class="line"><span class="meta"># shutdown -h 20:25  	#系统将在20:25关机</span></span><br><span class="line"><span class="meta"># shutdown -h +10  	#10分钟后关机</span></span><br><span class="line"><span class="meta"># shutdown -r now 	#立即重启</span></span><br><span class="line"><span class="meta"># shutdown -r +10  	#10分钟后重启</span></span><br><span class="line"><span class="meta"># reboot   		#重启，等同于shutdown -r now</span></span><br><span class="line"><span class="meta"># halt			#关闭系统，等同于shutdown -h now和poweroff</span></span><br></pre></td></tr></table></figure>
<p>不管是重启系统还是关闭系统，首先要运行sync命令，它可以把当前内存中的数据写人磁盘中，防止数据丢失。</p>
<h2 id="文件和目录管理"><a href="#文件和目录管理" class="headerlink" title="文件和目录管理"></a>文件和目录管理</h2><h3 id="系统目录结构"><a href="#系统目录结构" class="headerlink" title="系统目录结构"></a>系统目录结构</h3><p>“/”是Linux操作系统里面最核心的一个目录，所有的文件和目录全部在它下面，所以称它为“根目录”。</p>
<ul>
<li>/bin：bin是Binary的缩写，该目录下存放的是最常用的命令。</li>
<li>/boot：该目录下存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。</li>
<li>/dev：dev是Device(设备)的缩写。该口录下存放的是Linux的外部设备。在Linux中，访问设备的方式和访问文件的方式是相同的。</li>
<li>/etc：该目录下存放的是所有系统管理所需要的配置文件和子目录。</li>
<li>/home：这是用户的家目录。在Linux中.每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。</li>
<li>/lib和/lih64：这两个目录下存放的是系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件，几乎所有的应用程序都需要用到这些共享库。其中/lib64为64位的软件包的库文件所在日录。</li>
<li>/media：系统会自动识别一些设备(如U盘、光驱等)，当识别后，Linux会把识别的设备挂载到该目录下。</li>
<li>/mnt：系统提供该目录是为了让用户临时挂载别的文件系统。我们可以将光驱挂载到/mnt/上，然后进人该目录查看光驱里的内容。</li>
<li>/opt：这是给主机额外安装软件所设置的目录，该目录默认为空。比如，你要安装一个Oracle数据库，可以放到该目录下。</li>
<li>/proc：该目录是一个虚拟目录，是系统内存的映射，可以直接访问它来获取系统信息。该目录的内容在内存里，我们可以直接修改里面的某些文件。比如可以通过下面的命令来屏蔽主机的ping命令，使其他人无法ping你的机器。在日常工作中，你会经常用到类似的用法:<br><code># echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all</code></li>
<li>/root：该目录是系统管理员的用户家目录。</li>
<li>/run：这个目录其实和/var/run是同一个目录，这里面存放的是一些服务的pid。一个服务启动完后.是有一个pid文件的。</li>
<li>/shin：s就是Super User的意思，该目录存放的是系统管理员使用的系统管理程序。</li>
<li>/srv：该目录存放的是一些服务启动之后需要提取的数据。</li>
<li>/svs：该目录存放的是与硬件驭动程序相关的信息。</li>
<li>/tmp：该目录用来存放一些临时文件。</li>
<li>/usr：这是一个非常重要的目录，类似于Windows下的Program Files目录，用户的很多应用程序和文件都存放在该目录下</li>
<li>/usr/bin：该目录存放的是系统用户使用的应用程序。</li>
<li>/usr/sbin：该目录存放的是超级用户使用的比较高级的管理程序和系统守护程序。</li>
<li>/usr/src：该目录是内核源代码默认的放置目录。</li>
<li>/var：该目录存放的是不断扩充且经常修改的日录，包括各种日志文件或者pid文件，其中刚刚提到的/var/run就是在这个目录下面。</li>
</ul>
<p><code>注：有几个重要的目录不要误删除或者随意更改其内部文件。</code></p>
<pre><code>1. /etc目录下是系统的配置文件，如果更改了该目录下的某个文件，可能会导致系统无法正常启动。

2. /bin、/sbin、/usr/bin和/usr/sbin目录是系统顶设的执行文件的放置目录，其中/bin和/usr/bin目录下是供系统用户使用的指令(除root外的通用账户)，而/sbin和/usr/sbin目录下则是供root使用的指令。比如，ls指令就存放在/bin/目录下。

3. /var也是一个非常重要的目录，系统上运行各个程序时所产生的日志都被记录在该目录下(即/var/log目录中)。另外mail指令的预设也放置在这里。</code></pre><h3 id="绝对路径和相对路径"><a href="#绝对路径和相对路径" class="headerlink" title="绝对路径和相对路径"></a>绝对路径和相对路径</h3><ul>
<li>绝对路径：路径的写法一定是由根目录写起的，例如/usr/local/mysql</li>
<li>相对路径：路径的写法不是由根目录/写起的。例如.首先用户进人到/home，然后再进人到test，执行的命令为</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd /home</span></span><br><span class="line"><span class="meta"># cd test	#test是相对于/home目录来讲的，所以称为相对路径</span></span><br></pre></td></tr></table></figure>


<h3 id="文件属性"><a href="#文件属性" class="headerlink" title="文件属性"></a>文件属性</h3><p>用ls -l命令查看当前目录下的文件时，共显示了9列内容<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/08/27/Tg6iXdmxHsFavcC.png" alt=""></p>
<p>第1列：第1列共11位，其中第1位用来描述该文件的类型。</p>
<p><code>注：最后1位的“.”，老版本CentOS 5是没有这个点的，是因为新版本的ls添加了SELinux或者acl的属性。如果文件或者目录使用了SELinux context的属性，这里会是一个点“.”；如果设置了acl的属性，这里会是一个加号“+”。</code>　</p>
<ul>
<li>d：directory 表示该文件为目录。</li>
<li>-：regular file 表示该文件为普通文件。</li>
<li>l：link file表示该文件为链接文件，类似windows下的快捷方式</li>
<li>b：block 表示该文件为块设备，比如/dev/sda就是这样的文件，磁盘分区文件就是这种类型。</li>
<li>c：character 表示该文件为串行端口设备文件(又称字符设备文件)，比如键盘、鼠标、打印机、tty终端等都是这样的文件。</li>
<li>s：socket 表示该文件为套接字文件，用于进程之间的通信。</li>
</ul>
<p>文件类型后面的9位，每3位为一组。</p>
<ul>
<li>r代表可读，w代表可写，x代表可执行。</li>
<li>前3位为所有者(user)的权限</li>
<li>中间3位为所属组(group)的权限</li>
<li>最后3位为其他非本群组用户(others)的权限</li>
</ul>
<p>如：</p>
<ul>
<li>一个文件的属性为-rwxr-xr-，该文件为普通文件，文件拥有者可读、可写且可执行，文件所属组对其可读、不可写但可执行，其他用户对其只可读。</li>
<li>任何一个目录必须要有x权限才能打开并查看该目录下的内容。</li>
<li>一个目录的属性为drwxr–r–，其所有者为root，那么除root之外的其他用户是不能打开这个目录的。</li>
</ul>
<p>第2列：表示该文件占用的节点(inode)，如果是目录，那这个数值与该日录下是子目录数量有关。<br>第3列：表示该文件的所有者。<br>第4列：表示该文件的所属组。<br>第5列：表示该文件的大小。<br>第6列、第7列和第8列：表示该文件最后一次被修改的时间(mtime)，依次为月份、日期及时间。<br>第9列：表示文件名。</p>
<h3 id="文件后缀名"><a href="#文件后缀名" class="headerlink" title="文件后缀名"></a>文件后缀名</h3><p>在Linux系统中，文件的后缀名没有具体意义。是为了便于区分，习惯在定义文件名时加后缀名。例如1.sh、2.tac.gz、my.cnf，test.zip等。</p>
<ul>
<li>1.sh：代表它是一个shell脚本</li>
<li>2.tar.gz：代表它是一个压缩包</li>
<li>my.cnf：代表它是一个配置文件</li>
<li>test.zip：代表它是一个压缩文件</li>
</ul>
<h3 id="环境变量PATH"><a href="#环境变量PATH" class="headerlink" title="环境变量PATH"></a>环境变量PATH</h3><p>命令which：用于查找某个命令的绝对路径</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># which rmdir</span></span><br><span class="line">/usr/bin/<span class="built_in">rmdir</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># which rm</span></span><br><span class="line">alias rm='rm -i'</span><br><span class="line">    /usr/bin/rm</span><br><span class="line">    </span><br><span class="line"><span class="meta"># which ls</span></span><br><span class="line">alias ls='ls --color=auto'</span><br><span class="line">    /usr/bin/ls</span><br><span class="line">    </span><br><span class="line"># 命令alias可以设置命令或文件的别名。rm实际上是rm -i，加上-i选项后，删除文件或者命令时都会询问是否确定要删除（后续详解）</span><br></pre></td></tr></table></figure>

<p>环境变量PATH的作用为：使用命令时，只需直接写出命令，而不需写出命令的绝对路径</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># echo $PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br></pre></td></tr></table></figure>
<p><code>因/bin目录在PATH中，所以可以找到ls。由于PATH里没有/root目录，如果将ls移到/root目录下，当执行ls命令时，系统将找不到可执行文件，会提示command not found!</code></p>
<p><code>解决办法有两种：</code></p>
<ul>
<li>直接将/root路径加人到$PATH当中</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"># PATH=$PATH:/root</span><br><span class="line"># echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/root</span><br><span class="line"># ls</span><br><span class="line">anaconda-ks.cfg Desktop Documents Downloads initial-<span class="built_in">setup</span>-ks.cfg Music Pictures Public Templates Videos ls</span><br></pre></td></tr></table></figure>

<ul>
<li>使用绝对路径</li>
</ul>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"># /root/ls</span><br><span class="line">anaconda-ks.cfg Desktop Documents Downloads initial-<span class="built_in">setup</span>-ks.cfg Music Pictures Public Templates Videos ls</span><br></pre></td></tr></table></figure>




<h3 id="创建与删除"><a href="#创建与删除" class="headerlink" title="创建与删除"></a>创建与删除</h3><h4 id="命令cd：切换"><a href="#命令cd：切换" class="headerlink" title="命令cd：切换"></a>命令cd：切换</h4><p>命令cd (change directory的简写)是用来变更用户所在目录的，如果后面什么都不跟，就会直接进人当前用户的根目录下。如果后面跟目录名，则会直接切换到指定目录下。<code>命令cd后面只能是目录名，如果跟了文件名，则会报错</code>，示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd /tmp/</span></span><br><span class="line"><span class="meta"># pwd       #命令pwd用于显示当前所在目录的绝对路径名称</span></span><br><span class="line">/tmp</span><br><span class="line"></span><br><span class="line"><span class="meta"># cd </span></span><br><span class="line"><span class="meta"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<p><code>特殊符号：
“.”表示当前目录，
“..”表示当前目录的上一级目录</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd /usr/local/lib/</span></span><br><span class="line"><span class="meta"># pwd</span></span><br><span class="line">/usr/local/lib</span><br><span class="line"></span><br><span class="line"><span class="meta"># cd .</span></span><br><span class="line"><span class="meta"># pwd</span></span><br><span class="line">/usr/local/lib</span><br><span class="line"></span><br><span class="line"><span class="meta"># cd ..</span></span><br><span class="line"><span class="meta"># pwd</span></span><br><span class="line">/usr/local</span><br></pre></td></tr></table></figure>

<h4 id="命令mkdir：创建"><a href="#命令mkdir：创建" class="headerlink" title="命令mkdir：创建"></a>命令mkdir：创建</h4><p>命令mkdir (make directory的简写)用于创建目录，格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> [-p] [目录名称]</span><br></pre></td></tr></table></figure>

<p><code>-p：若所建的上层目录不存在，则会级联创建上层目录；若创建的目录已存在，它不会做任何事情，并且不会报错；示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir /tmp/test/123</span></span><br><span class="line"><span class="built_in">mkdir</span>：无法创建目录‘/tmp/test/<span class="number">123</span>’：没有那个文件或目录</span><br><span class="line"></span><br><span class="line"><span class="meta"># mkdir -p /tmp/test/123</span></span><br><span class="line"><span class="meta"># ls /tmp/test</span></span><br><span class="line">I23</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir /tmp/test/123</span></span><br><span class="line"><span class="built_in">mkdir</span>：无法创建目录‘/tmp/test/<span class="number">123</span>’：文件已存在</span><br><span class="line"></span><br><span class="line"><span class="meta"># mkdir -p /tmp/test/123</span></span><br><span class="line"><span class="meta"># ls -ld /tmp/test/123</span></span><br><span class="line">drwxr-xr-x. <span class="number">2</span> root root <span class="number">4096</span> <span class="number">5</span>月   <span class="number">9</span> <span class="number">19</span>:<span class="number">10</span> /tmp/test/<span class="number">123</span></span><br><span class="line"></span><br><span class="line"># -d选项是针对目录的，通常是和-l并用，写成-ld。它可以查看指定目录的属性，比如本例中，可查看/tmp/test/<span class="number">123</span>目录的创建时间，如果不加-d，则会显示该目录里面的文件和子目录的属性</span><br></pre></td></tr></table></figure>

<h4 id="命令rmdir：删除空目录"><a href="#命令rmdir：删除空目录" class="headerlink" title="命令rmdir：删除空目录"></a>命令rmdir：删除空目录</h4><p>命令rmdir(remove directory的简写)用于删除空目录，后面可以是一个目录，也可以是多个目录(用空格分隔)。只能删除目录，不能删除文件。rmdir有和mkdir具有相同的选项-p，可以级联删除目录，但如果某一个目录里还有目录或者文件时，将删除失败。示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># ls /tmp/test</span></span><br><span class="line"><span class="number">123</span></span><br><span class="line"><span class="meta"># rmdir /tmp/test/</span></span><br><span class="line"><span class="built_in">rmdir</span>：删除‘/tmp/test/’失败：目录非空</span><br><span class="line"></span><br><span class="line"><span class="meta"># rmdir /tmp/test/123</span></span><br><span class="line"><span class="meta"># ls /tmp/test</span></span><br><span class="line">#</span><br></pre></td></tr></table></figure>

<h4 id="命令rm：删除"><a href="#命令rm：删除" class="headerlink" title="命令rm：删除"></a>命令rm：删除</h4><p>格式如下，在此介绍最常用的两个选项</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">rm [-rf] [目录或文件名称]</span><br></pre></td></tr></table></figure>

<p><code>-r：删除目录，类似于rmdir，删除目录时，会询问是否删除，如果输入‘y’则会删除，如果输人‘n’则不删除。另外能删除非空目录。示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir -p /tmp/test/123</span></span><br><span class="line"><span class="meta"># rm -r /tmp/test/123</span></span><br><span class="line">rm：是否删除目录‘/t叩/test/<span class="number">123</span>’? y</span><br></pre></td></tr></table></figure>

<p><code>-f：表示强制删除。如果后面跟一个不存在的文件或者目录，也不会报错。但如果要删除一个存在的目录时，即使加上-f选项也会报错。所以，使用命令rm删除目录时，一定要加-r选项。示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># rm /tmp/test/123/123</span></span><br><span class="line">rm：无法删除‘/tmp/test/<span class="number">123</span>/<span class="number">123</span>’：没有那个文件或目录</span><br><span class="line"><span class="meta"># rm -f /tmp/test/123/123</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># rm -f /tmp/test/123</span></span><br><span class="line">rm：无法删除‘/tmp/test/<span class="number">123</span>’：是一个目录</span><br><span class="line"><span class="meta"># rm -rf /tmp/test/123</span></span><br></pre></td></tr></table></figure>

<p><code>注：rm -rf命令后面不能加‘/’否则会把系统文件全部删除!</code></p>
<h3 id="复制与移动"><a href="#复制与移动" class="headerlink" title="复制与移动"></a>复制与移动</h3><h4 id="命令cp：复制"><a href="#命令cp：复制" class="headerlink" title="命令cp：复制"></a>命令cp：复制</h4><p>cp是copy(即复制)的简写，命令的格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">cp [选项] [来源文件] [目的文件]</span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<p><code>-r：如果要复制一个目录，必须加-r选项，否则不能复制。示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir 123</span></span><br><span class="line"><span class="meta"># cp 123 456</span></span><br><span class="line">cp：略过目录<span class="string">"123"</span>   #复制失败</span><br><span class="line"></span><br><span class="line"><span class="meta"># cp -r 123 456</span></span><br><span class="line"><span class="meta"># ls -ld 123 456</span></span><br><span class="line">drwxr-xr-x <span class="number">2</span> root root <span class="number">6</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">09</span>:<span class="number">49</span> <span class="number">123</span></span><br><span class="line">drwxr-xr-x <span class="number">2</span> root root <span class="number">6</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">09</span>:<span class="number">51</span> <span class="number">456</span></span><br></pre></td></tr></table></figure>

<p><code>-i：如果遇到一个已存在的文件，会询问是否覆盖，示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd 123</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"># </span><br><span class="line"></span><br><span class="line"><span class="meta"># touch 111</span></span><br><span class="line"><span class="meta"># touch 222</span></span><br><span class="line"><span class="meta"># cp -i 111 222</span></span><br><span class="line">cp：是否覆盖'222'?  n</span><br><span class="line"># echo 'abc' &gt; 111</span><br><span class="line"># echo 'def' &gt; 222</span><br><span class="line"><span class="meta"># cat 111 222</span></span><br><span class="line">abc</span><br><span class="line">def</span><br><span class="line"># /bin/cp <span class="number">111</span> <span class="number">222</span></span><br><span class="line"><span class="meta"># cat 111</span></span><br><span class="line">abc</span><br><span class="line"><span class="meta"># cat 222</span></span><br><span class="line">abc</span><br><span class="line"></span><br><span class="line"><span class="meta"># touch命令：如果有这个文件，则会修改该文件的访问时间；如果没有这个文件，就会创建这个文件。</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># echo命令：用于打印，这里echo的内容abc和def分别写入文件“111”和“222<span class="meta-string">"。起写入作用的就是符号“&gt;”。在Linux中叫做重定向，即把前面产生的输出写入到后面的文件中。</span></span></span><br><span class="line"><span class="meta"><span class="meta-string"></span></span></span><br><span class="line"><span class="meta"><span class="meta-string"># 符号&gt;&gt;，跟符号&gt;类似，其作用也是重定向，即把前面的内容输入到后面的文件中，但符号&gt;&gt;是“追加”的意思。当使用符号&gt;时，如果文件中有内容，则会覆盖文件中原有的内容，而使用符号&gt;&gt;，则不会覆盖原有的内容。</span></span></span><br><span class="line"><span class="meta"><span class="meta-string"></span></span></span><br><span class="line"><span class="meta"><span class="meta-string"># cat命令：则用于读取文件，并把读出的内容打印到当前屏幕上。（后续详解）</span></span></span><br></pre></td></tr></table></figure>


<h4 id="命令mv：移动"><a href="#命令mv：移动" class="headerlink" title="命令mv：移动"></a>命令mv：移动</h4><p>mv是move的简写，格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">mv [选项] [源文件或目录] [目标文件或目录]</span><br></pre></td></tr></table></figure>

<ul>
<li>当目标文件是目录时：</li>
</ul>
<blockquote>
<p>如果该目录存在，则会把源文件或目录移动到该目录中。<br>如果该目录不存在，则会把源目录重命名为给定的目标文件名。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir /tmp/test_mv</span></span><br><span class="line"><span class="meta"># cd /tmp/test_mv</span></span><br><span class="line"><span class="meta"># mkdir dira dirb</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line">dira  dirb</span><br><span class="line"></span><br><span class="line"><span class="meta"># mv dira dirc      #dirc不存在</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line">dirb dirc           <span class="meta">#dira重命名为dirc</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># mv dirc dirb      #dirb存在，把dirc移动到dirb中</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line">dirb</span><br><span class="line"><span class="meta"># ls dirb</span></span><br><span class="line">dirc</span><br></pre></td></tr></table></figure>

<ul>
<li>当目标文件是文件时：</li>
</ul>
<blockquote>
<p>如果该文件存在，则会询问是否覆盖。<br>如果该文件不存在，则会把源文件重命名为给定的目标文件名。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># touch filed</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line">dirb filed</span><br><span class="line"></span><br><span class="line"><span class="meta"># mv filed filee    #filee文件不存在，把filed重命名为filee</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line">dirb filee</span><br><span class="line"></span><br><span class="line"><span class="meta"># mv filee dirb     #dirb存在，把filee移动到dirb中</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line">dirb</span><br><span class="line"></span><br><span class="line"><span class="meta"># ls dirb</span></span><br><span class="line">dirc  filee</span><br></pre></td></tr></table></figure>


<h3 id="查看文档内容"><a href="#查看文档内容" class="headerlink" title="查看文档内容"></a>查看文档内容</h3><h4 id="命令cat：查看"><a href="#命令cat：查看" class="headerlink" title="命令cat：查看"></a>命令cat：查看</h4><p>查看文件的内容并将其显示在屏幕上。cat后面可以不加任何选项，直接跟文件名。</p>
<p><code>-n：查看文件时，把行号也显示到屏幕上。示例如下:</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># echo '111111111' &gt; dirb/filee</span></span><br><span class="line"><span class="comment"># echo '222222222' &gt;&gt; dirb/filee</span></span><br><span class="line"><span class="comment"># cat dirb/filee</span></span><br><span class="line">111111111</span><br><span class="line">222222222</span><br><span class="line"><span class="comment"># cat -n dirb/filee</span></span><br><span class="line">      1  111111111</span><br><span class="line">      2  222222222</span><br></pre></td></tr></table></figure>

<p><code>-A：显示所有的内容，包括特殊字符。不加-A选项，每行后面的$符号是看不到的，示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cat -A dirb/filee</span></span><br><span class="line"><span class="number">111111111</span>$</span><br><span class="line"><span class="number">222222222</span>$</span><br></pre></td></tr></table></figure>

<h4 id="命令tac：倒序查看"><a href="#命令tac：倒序查看" class="headerlink" title="命令tac：倒序查看"></a>命令tac：倒序查看</h4><p>和命令cat一样，但显示结果和命令cat相反，如下所示:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># tac dirb/filee</span></span><br><span class="line"><span class="number">222222222</span></span><br><span class="line"><span class="number">111111111</span></span><br></pre></td></tr></table></figure>


<h4 id="命令more：搜索查看"><a href="#命令more：搜索查看" class="headerlink" title="命令more：搜索查看"></a>命令more：搜索查看</h4><p>用于查看文件的内容，后面直接跟文件名。当文件内容太多，按Ctrl+D向上翻屏，按Ctrl+F向下翻屏(按空格键也行)。看完所有内容后就会退出，如想提前退出，按q键。</p>
<h4 id="命令less：查看搜索"><a href="#命令less：查看搜索" class="headerlink" title="命令less：查看搜索"></a>命令less：查看搜索</h4><p>和命令more一样，后面直接跟文件名，比more功能多一些。按空格键可以翻页，按 j 键可以向下移动一行，按 k 键可以向上移动一行。可以按一下 / 键(在当前行向下搜索)，并输人一个字符串，然后回车查找字符串，可以按 n 键显示下一个。另外，也可以用 ? 键(?是在当前行向上搜索)替代 / 键来搜索字符串.</p>
<p><code>补充：快捷键 Ctrl+f 上一屏，Ctrl+b 下一屏</code></p>
<h4 id="命令head：查看内容前几行"><a href="#命令head：查看内容前几行" class="headerlink" title="命令head：查看内容前几行"></a>命令head：查看内容前几行</h4><p>命令head后面直接跟文件名，默认显示文件的前10行，加-n选项，则显示文件的前n行，示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># head -n 1 /etc/passwd</span></span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta"># head -n2 /etc/passwd</span></span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line">bin:x:<span class="number">1</span>:<span class="number">1</span>:bin:/bin:/sbin/nologin</span><br><span class="line"></span><br><span class="line"><span class="meta">#head -2 /etc/passwd</span></span><br><span class="line">root:x:O:O:root:/root:/bin/bash</span><br><span class="line">bin:x:<span class="number">1</span>:<span class="number">1</span>:bin:/bin:/sbin/nologin</span><br></pre></td></tr></table></figure>
<p><code>注：选项-n后有无空格均可，也可省略字母n，-后面直接跟数字</code>　</p>
<h4 id="命令tail：查看内容最后几行"><a href="#命令tail：查看内容最后几行" class="headerlink" title="命令tail：查看内容最后几行"></a>命令tail：查看内容最后几行</h4><p>和命令head类似，默认显示文件的最后10行，加<code>-n选项，则显示文件的最后n行</code>；<code>-f选项，动态显示文件的最后10行，如文件内容在不断增加，可以实时地查看文件最后10行内容。</code></p>
<h3 id="更改文档权限"><a href="#更改文档权限" class="headerlink" title="更改文档权限"></a>更改文档权限</h3><h4 id="命令chgrp：更改所属组"><a href="#命令chgrp：更改所属组" class="headerlink" title="命令chgrp：更改所属组"></a>命令chgrp：更改所属组</h4><p>chgrp(change group的简写)命令可以更改文件的所属组，其格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">chgrp [-R] [组名] [文件名或目录名]</span><br></pre></td></tr></table></figure>
<p>常用选项：</p>
<p><code>-R：只适用于目录，实现级联更改子目录以及子文件所属组</code></p>
<p>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># groupadd testgroup    #含义为增加一个用户组</span></span><br><span class="line"><span class="meta"># mkdir /tmp/4_6	    #创建目录</span></span><br><span class="line"><span class="meta"># cd /tmp/4_6</span></span><br><span class="line"><span class="meta"># touch test1</span></span><br><span class="line"><span class="meta"># ls -l test1</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> root root <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">16</span> test1</span><br><span class="line"></span><br><span class="line"><span class="meta"># chgrp testgroup test1     #更改文件所属组</span></span><br><span class="line"><span class="meta"># ls -l test1</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> root testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">16</span> testl</span><br></pre></td></tr></table></figure>


<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir dir2</span></span><br><span class="line"><span class="meta"># touch dir2/test2</span></span><br><span class="line"><span class="meta"># ls -ld dir2</span></span><br><span class="line">drwxr-xr-x <span class="number">2</span> root root <span class="number">6</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">19</span> dir2</span><br><span class="line"></span><br><span class="line"><span class="meta"># chgrp testgroup dir2      #更改目录所属组</span></span><br><span class="line"><span class="meta"># ls -ld dir2</span></span><br><span class="line">drwxr-xr-x <span class="number">2</span> root testgroup <span class="number">6</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">19</span> dir2</span><br><span class="line"><span class="meta"># ls -l dir2                #目录下的文件并没有更改所属组</span></span><br><span class="line">总用量<span class="number">0</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> root root <span class="number">0</span> <span class="number">2</span>月    <span class="number">18</span> <span class="number">11</span>:<span class="number">19</span> test2</span><br><span class="line"></span><br><span class="line"><span class="meta"># chgrp -R testgroup dir2   #级联更改目录下子文件所属组</span></span><br><span class="line"><span class="meta"># ls -l dir2</span></span><br><span class="line">总用量<span class="number">0</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> root testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">25</span> test2</span><br></pre></td></tr></table></figure>


<h4 id="命令chown：更改所有者"><a href="#命令chown：更改所有者" class="headerlink" title="命令chown：更改所有者"></a>命令chown：更改所有者</h4><p>chown (change owner的简写)命令可以更改文件的所有者，其格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">chown [-R] 账户名 文件/目录名</span><br><span class="line">或</span><br><span class="line">chown [-R] 账户名:组名 文件/目录名</span><br></pre></td></tr></table></figure>
<p>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir dir3</span></span><br><span class="line"><span class="meta"># useradd userl     #创健用户user1</span></span><br><span class="line"><span class="meta"># touch dir3/test3  </span></span><br><span class="line"><span class="meta"># chown user1 dir3</span></span><br><span class="line"><span class="meta"># ls -ld dir3    #dir3目录所有者已经由root改为user1</span></span><br><span class="line">drwxr-xr-x <span class="number">2</span> userl root <span class="number">19</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3</span><br><span class="line"></span><br><span class="line"><span class="meta"># ls -l dir3   #但是dir3目录下test3文件的所有者依旧是root</span></span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rw-r--r-- l root root <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> test3</span><br><span class="line"></span><br><span class="line"><span class="meta"># chown -R userl:testgroup dir3     #-R：只适用于目录</span></span><br><span class="line"><span class="meta"># ls -l test3</span></span><br><span class="line">总用量<span class="number">0</span></span><br><span class="line">-rw-r--r-- l userl testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> test3</span><br></pre></td></tr></table></figure>

<h4 id="命令chmod：更改读写权限"><a href="#命令chmod：更改读写权限" class="headerlink" title="命令chmod：更改读写权限"></a>命令chmod：更改读写权限</h4><p>为了方便更改文件的权限，<code>Linux使用数字代替rwx：r等于4，w等于2，x等于1，-等于0</code>，<code>目录的默认权限为755，而文件的默认权限为644</code>。如：rwxrwx—用数字表示就是770，算法为:rwx=4+2+1=7，rwx=4+2+1=7，—=0+0+0=0</p>
<p>chmod( change mode的简写)命令用于改变用户对文件/目录的读写执行权限，格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">chmod [-R] xxx 文件/目录名    <span class="meta">#xxx表示数字</span></span><br><span class="line">或</span><br><span class="line">chmod [u=?，g=?，o=?，a=?] 文件/目录   </span><br><span class="line">#u、g、o分别表示user、group和others的属性，a代表all(全部)，?表示r、w、x</span><br><span class="line">或</span><br><span class="line">chmod [u+?，g+?，o+?，a+?] 文件/目录    #+：加权限</span><br><span class="line">或</span><br><span class="line">chmod [u-?，g-?，o-?，a-?] 文件/目录    #-：减权限</span><br></pre></td></tr></table></figure>
<p>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># ls -ld dir3</span></span><br><span class="line">drwxr-xr-x <span class="number">2</span> userl testgroup <span class="number">19</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3</span><br><span class="line"><span class="meta"># ls -l dir3</span></span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> user1 testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> test3</span><br><span class="line"></span><br><span class="line"><span class="meta"># chmod 750 dir3</span></span><br><span class="line"><span class="meta"># ls -ld dir3</span></span><br><span class="line">drwxr-x--- <span class="number">2</span> user1 testgroup <span class="number">19</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3</span><br><span class="line"><span class="meta"># ls -l dir3/test3</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> userl testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3/test3</span><br><span class="line"></span><br><span class="line"><span class="meta"># chmod 700 dir3/test3</span></span><br><span class="line"><span class="meta"># ls -l dir3/test3</span></span><br><span class="line">-rwx------ <span class="number">1</span> user1 testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3/test3</span><br><span class="line"></span><br><span class="line"><span class="meta"># chmod -R 700 dir3</span></span><br><span class="line"><span class="meta"># ls -ld dir3</span></span><br><span class="line">drwx------ <span class="number">2</span> user1 testgroup <span class="number">19</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3</span><br><span class="line"><span class="meta"># ls -l dir3</span></span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rwx------ <span class="number">1</span> user1 testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> test3</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># chmod u=rwx,og=rx dir3/test3</span></span><br><span class="line"><span class="meta"># ls -l dir3/test3</span></span><br><span class="line">-rwxr-xr-x <span class="number">1</span> userl testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3/test3</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># chmod u-x dir3/test3</span></span><br><span class="line"><span class="meta"># ls -l dir3</span></span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">-rw-r-xr-x <span class="number">1</span> user1 testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> test3</span><br><span class="line"></span><br><span class="line"><span class="meta"># chmod a-x dir3/test3</span></span><br><span class="line"><span class="meta"># ls -l dir3/test3</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> userl testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3/test3</span><br><span class="line"></span><br><span class="line"><span class="meta"># chmod u+x dir3/test3</span></span><br><span class="line"><span class="meta"># ls -l dir3/test3</span></span><br><span class="line">-rwxr--r-- <span class="number">1</span> userl testgroup <span class="number">0</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> dir3/test3</span><br></pre></td></tr></table></figure>



<h4 id="命令chattr：修改文件-目录特殊属性"><a href="#命令chattr：修改文件-目录特殊属性" class="headerlink" title="命令chattr：修改文件/目录特殊属性"></a>命令chattr：修改文件/目录特殊属性</h4><p>命令chattr(change attribute)的格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">chattr [+-=] [Asaci] [文件或者目录名]</span><br></pre></td></tr></table></figure>
<p>其中，+、-和=分别表示增加、减少和设定。各个选项的含义如下</p>
<p><code>A：表示文件或目录的atime(访问或执行时间)将不可修改。</code><br><code>s：会将数据同步写人磁盘中。</code><br><code>a：表示只能追加，不能删除，非root用户不能设定该属性。</code><br><code>c：表示自动压缩该文件，读取时会自动解压。</code><br><code>i：表示文件不能删除、重命名、设定链接、写入以及新增数据。</code></p>
<p>常用选项a、i示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># chattr +i dir2</span></span><br><span class="line"><span class="meta"># touch dir2/test5</span></span><br><span class="line">touch：无法创建<span class="string">"dir2/test5"</span>：权限不够</span><br><span class="line"></span><br><span class="line"><span class="meta"># chattr -i dir2</span></span><br><span class="line"><span class="meta"># touch dir2/test5</span></span><br><span class="line"><span class="meta"># chattr +i dir2</span></span><br><span class="line"><span class="meta"># rm -f dir2/test5</span></span><br><span class="line">rm：无法删除<span class="string">"dir2/test5"</span>：权限不够</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># chattr -i dir2</span></span><br><span class="line"><span class="meta"># touch dir2/test6</span></span><br><span class="line"><span class="meta"># ls dir2</span></span><br><span class="line">test2 test5 test6</span><br><span class="line"></span><br><span class="line"><span class="meta"># chattr +a dir2</span></span><br><span class="line"><span class="meta"># rm -f dir2/test6</span></span><br><span class="line">rm：无法删除<span class="string">"dir2/test6"</span>：不允许的操作</span><br><span class="line"></span><br><span class="line"><span class="meta"># touch dir2/test7</span></span><br><span class="line"><span class="meta"># ls dir2</span></span><br><span class="line">test2  test5  test6  test7</span><br></pre></td></tr></table></figure>

<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta"># chattr +a dir2/test7</span></span><br><span class="line"># echo '11111' &gt; dir2/test7         # “&gt;”：覆盖的含义</span><br><span class="line">-bash：dir2/test7：不允许的操作</span><br><span class="line"></span><br><span class="line"># echo '11111' &gt;&gt; dir2/test7        # “&gt;&gt;”：追加的含义</span><br><span class="line"><span class="meta"># cat dir2/test7</span></span><br><span class="line"><span class="number">11111</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># chattr +i dir2/test6</span></span><br><span class="line"># echo '11111' &gt;&gt; dir2/test6</span><br><span class="line">-bash：dir2/test6：权限不够</span><br><span class="line"></span><br><span class="line"># echo '11111' &gt; dir2/test6</span><br><span class="line">-bash: dir2/test6：权限不够</span><br><span class="line"></span><br><span class="line"><span class="meta"># rm -f dir2/test6</span></span><br><span class="line">rm：无法删除'dir2/test6"：权限不够</span><br></pre></td></tr></table></figure>


<h3 id="搜索文档"><a href="#搜索文档" class="headerlink" title="搜索文档"></a>搜索文档</h3><h4 id="命令which：查找可执行文件的绝对路径"><a href="#命令which：查找可执行文件的绝对路径" class="headerlink" title="命令which：查找可执行文件的绝对路径"></a>命令which：查找可执行文件的绝对路径</h4><p>which只能用来查找PATH环境变量中出现的路径下的可执行文件。示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># which vi</span></span><br><span class="line">/usr/bin/vi</span><br><span class="line"></span><br><span class="line"><span class="meta"># which cat</span></span><br><span class="line">/usr/bin/cat</span><br></pre></td></tr></table></figure>


<h4 id="命令find：搜索文件"><a href="#命令find：搜索文件" class="headerlink" title="命令find：搜索文件"></a>命令find：搜索文件</h4><p>格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="built_in">find</span> [路径] [参数]</span><br></pre></td></tr></table></figure>
<h5 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h5><p><code>-atime +n/-n：access time表示访问或执行时间大于或小于n天的文件。</code><br><code>-ctime +n/-n：change time表示写入、更改inode属性(如更改所有者、权限或者链接〕的时间大于或小于n天的文件。</code><br><code>-mtime +n/-n：modified time表示写入时间大于或小于n天的文件。</code><br><code>-mmin +n/-n：表示写入时间大于或小于n分钟的文件。</code></p>
<ul>
<li><p>inode(索引节点)用来存放档案及目录的基本信息，包含时间信息、文档名、所有者以及所属组等。inode是Unix操作系统中的一种数据结构，其本质是结构体，在文件系统创建时生成，且个数有限。可以通过命令df -i(如下图)来查看各个分区的inode总数以及使用情况。</p>
</li>
<li><p>atime不一定在访问文件之后被修改，因为在使用ext3文件系统时，如果mount使用了noatime参数，那么就不会更新atime的信息。这三个time属性值都放在了inode中。若mtime，atime被修改，那么inode就一定会改，既然inode改了，那ctime也跟着要改了。<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/09/MJRHsETVIPDYcwg.png" alt="">  </p>
</li>
</ul>
<p>stat命令可用来列出文件的atime，ctime和mtime，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># stat dir2/test2</span></span><br><span class="line">  文件：<span class="string">"dir2/test2"</span></span><br><span class="line">  大小：<span class="number">0</span>	块：<span class="number">0</span>	IO块：<span class="number">4096</span>	普通空文件</span><br><span class="line">设备：<span class="number">803</span>h/<span class="number">2051</span>d        Inode： <span class="number">17334801</span>	硬链接：<span class="number">1</span></span><br><span class="line">权限：(<span class="number">0644</span>/-rw-r--r--)	Uid：(<span class="number">0</span>/root)           Gid：(<span class="number">1001</span>/testgroup)</span><br><span class="line">最近访问：<span class="number">2017</span><span class="number">-02</span><span class="number">-18</span> <span class="number">11</span>：<span class="number">25</span>：<span class="number">39.579675461</span> +<span class="number">0800</span></span><br><span class="line">最近更改：<span class="number">2017</span><span class="number">-02</span><span class="number">-18</span> <span class="number">11</span>：<span class="number">25</span>：<span class="number">39.579675461</span> +<span class="number">0800</span></span><br><span class="line">最近改动：<span class="number">2017</span><span class="number">-02</span><span class="number">-18</span> <span class="number">11</span>：<span class="number">28</span>：<span class="number">13.688212303</span> +<span class="number">0800</span></span><br><span class="line">创逮时间：-</span><br></pre></td></tr></table></figure>


<p>命令find示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># find /tmp/4_6/ -mtime -1</span></span><br><span class="line">/tmp/<span class="number">4</span>_6/</span><br><span class="line">/tmp/<span class="number">4</span>_6/test1</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir2</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir2/test2</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir2/test5</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir2/test6</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir2/test?</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir3</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir3/test3</span><br><span class="line">/tmp/<span class="number">4</span>_6/dir4</span><br><span class="line">/tmp/<span class="number">4</span>_6/test4</span><br><span class="line">/tmp/<span class="number">4</span>_6/test5</span><br></pre></td></tr></table></figure>


<h5 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h5><p><code>-name filename：表示直接查找该文件名的文件，示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># find . -name test2        #.表示当前目录</span></span><br><span class="line">./dir2/test2</span><br><span class="line"><span class="meta"># find . -name <span class="meta-string">"test*"</span>      #支特用*通配</span></span><br><span class="line">./test1</span><br><span class="line">./dir2/test2</span><br><span class="line">./dir2/test5</span><br><span class="line">./dir2/test6</span><br><span class="line">./dir2/test7</span><br><span class="line">./dir3/test3</span><br><span class="line">./test4</span><br><span class="line">./test5</span><br></pre></td></tr></table></figure>

<p><code>-type filetype：表示通过文件类型查找文件。filetype包含f, b, c, d, l, s等类型，示例如下:</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># find . -type d</span></span><br><span class="line">.</span><br><span class="line">./dir2</span><br><span class="line">./dir3</span><br><span class="line">./dir4</span><br></pre></td></tr></table></figure>


<h3 id="链接文件"><a href="#链接文件" class="headerlink" title="链接文件"></a>链接文件</h3><p>链接文件分为硬链接(hard link)和软链接(symbolic link)两种。两种链接的本质区别在于inode。</p>
<ul>
<li>硬链接：当系统要读取一个文件时，会先读inode信息，然后再根据inode中的信息到块区域将数据取出来。而硬链接是直接再建立一个inode链接到文件放置的块区域，即进行硬链接时该文件内容没有任何变化，只是增加了一个指向这个文件的inode，并不会额外占用磁盘空间。硬链接有两个限制：(1)不能跨文件系统，因为不同的文件系统有不同的inode<br>table; (2)不能链接目录。</li>
<li>软链接：软链接是建立一个独立的文件，当读取这个链接文件时，它会把读取的行为转发到该文件所链接的文件上。例如，现在有一个文件a，我们做了一个软链接文件b(只是一个链接文件，非常小)，b指向了a。当读取b时，b就会把读取的动作转发到a上，这样就读取了文件a，当我们删除文件a时，链接文件b不会被删除；但如果再次读取b时，会提示无法打开文件。然而，当我们删除b时，a是不会有任何影响的。</li>
</ul>
<h4 id="命令ln：建立链接"><a href="#命令ln：建立链接" class="headerlink" title="命令ln：建立链接"></a>命令ln：建立链接</h4><p>格式为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">ln [-s] [来源文件] [目的文件]</span><br></pre></td></tr></table></figure>
<pre><code>该命令常用的选项是-s。如果不加-s选项就是建立硬链接，加上-s选项就建立软链接</code></pre><h5 id="硬链接特性"><a href="#硬链接特性" class="headerlink" title="硬链接特性"></a>硬链接特性</h5><p>示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir /tmp/4_9</span></span><br><span class="line"><span class="meta"># cd /tmp/4_9</span></span><br><span class="line"><span class="meta"># cp /etc/passwd ./</span></span><br><span class="line"><span class="meta"># ll                    #ll等同于ls -l</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> root root <span class="number">2276</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">14</span>:<span class="number">52</span> passwd</span><br><span class="line"><span class="meta"># du -sk #du命令用来计算文件或者目录的大小，-k表示以KB为单位，此处为4KB</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># ln passwd passwd-hard</span></span><br><span class="line"><span class="meta"># ll</span></span><br><span class="line">总用量 <span class="number">8</span></span><br><span class="line">-rw-r--r-- <span class="number">2</span> root root <span class="number">2276</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">14</span>:<span class="number">52</span> passwd</span><br><span class="line">-rw-r--r-- <span class="number">2</span> root root <span class="number">2276</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">14</span>:<span class="number">52</span> passwd-hard</span><br><span class="line"><span class="meta"># du -sk        #目录的总大小并没有变化</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>删除源文件，再比较。示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># rm -f passwd</span></span><br><span class="line"><span class="meta"># ll</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> root root <span class="number">2276</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">14</span>:<span class="number">52</span> passwd-hard</span><br><span class="line"><span class="meta"># du -sk        #删除源文件passwd后，文件大小依旧不变，说明硬链接文件并不会复制数据块，额外占用磁盘空间</span></span><br><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>

<p>再来看硬链接的另外一个限制，不允许目录做硬链接，示例如下:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir 123</span></span><br><span class="line"><span class="meta"># ln 123 456</span></span><br><span class="line">ln: '123':不允许将硬链接指向目录</span><br></pre></td></tr></table></figure>


<h5 id="软链接特性"><a href="#软链接特性" class="headerlink" title="软链接特性"></a>软链接特性</h5><p>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkdir 456</span></span><br><span class="line"><span class="meta"># cd 456</span></span><br><span class="line"><span class="meta"># cp /etc/passwd ./</span></span><br><span class="line"><span class="meta"># ln -s passwd  passwd-soft</span></span><br><span class="line"># <span class="number">11</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line">-rw-r--r-- <span class="number">1</span> root root <span class="number">2276</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">15</span>:<span class="number">01</span> passwd</span><br><span class="line">lrwxrwxrwx <span class="number">1</span> root root    <span class="number">6</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">15</span>:<span class="number">02</span> passwd-soft -&gt; passwd</span><br><span class="line"></span><br><span class="line"><span class="meta"># head -n1 passwd-soft  #head -n1 命令查看文件开头部分的第1行内容，不加-n，head默认为10行</span></span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line"><span class="meta"># head -nl passwd</span></span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta"># rm -f passwd          #删除源文件，则不能读取软链接文件</span></span><br><span class="line"><span class="meta"># head -n1 passwd-soft</span></span><br><span class="line"><span class="meta"># ll</span></span><br><span class="line">总用量 <span class="number">0</span></span><br><span class="line">lrwxrwxrwx <span class="number">1</span> root root	  <span class="number">6</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">15</span>:<span class="number">02</span> passwd-soft -&gt; passwd</span><br></pre></td></tr></table></figure>
<p>目录不可以做硬链接，但可以做软链接，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd ..</span></span><br><span class="line"><span class="meta"># ln -s 456 789</span></span><br><span class="line"><span class="meta"># ls -ld 456 789</span></span><br><span class="line">drwxr-xr-x <span class="number">2</span> root root <span class="number">25</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">15</span>:<span class="number">03</span> <span class="number">456</span></span><br><span class="line">lrwxrwxrwx <span class="number">1</span> root root  <span class="number">3</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">15</span>:<span class="number">04</span> <span class="number">789</span> -&gt; <span class="number">456</span></span><br></pre></td></tr></table></figure>



<h2 id="系统用户与用户组管理"><a href="#系统用户与用户组管理" class="headerlink" title="系统用户与用户组管理"></a>系统用户与用户组管理</h2><h3 id="最重要的两个文件"><a href="#最重要的两个文件" class="headerlink" title="最重要的两个文件"></a>最重要的两个文件</h3><p>这两个文件是Linux系统最重要的文件之一。如果没有这两个文件或者这两个文件出了问题，则无法正常登录系统。</p>
<h4 id="etc-passwd"><a href="#etc-passwd" class="headerlink" title="/etc/passwd"></a>/etc/passwd</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cat /etc/passwd | head            #符号<span class="meta-string">"|"</span>称为管道符，作用是把前面命令的输出，输入给后面的命令，head默认为10行</span></span><br><span class="line">root:x:<span class="number">0</span>:<span class="number">0</span>:root:/root:/bin/bash</span><br><span class="line">bin:x:<span class="number">1</span>:<span class="number">1</span>:bin:/bin:/sbin/nologin</span><br><span class="line">daemon:x:<span class="number">2</span>:<span class="number">2</span>:daemon:/sbin:/sbin/nologin</span><br><span class="line">adm:x:<span class="number">3</span>:<span class="number">4</span>:adm:/var/adm:/sbin/nologin</span><br><span class="line">lp:x:<span class="number">4</span>:<span class="number">7</span>:lp:/var/spool/lpd:/sbin/nologin</span><br><span class="line">sync:x:<span class="number">5</span>:<span class="number">0</span>:sync:/sbin:/bin/sync</span><br><span class="line"><span class="built_in">shutdown</span>:x:<span class="number">6</span>:<span class="number">0</span>:<span class="built_in">shutdown</span>:/sbin:/sbin/<span class="built_in">shutdown</span></span><br><span class="line">halt:x:<span class="number">7</span>:<span class="number">0</span>:halt:/sbin:/sbin/halt</span><br><span class="line">mail:x:<span class="number">8</span>:<span class="number">12</span>:mail:/var/spool/mail:/sbin/nologin</span><br><span class="line"><span class="keyword">operator</span>:x:<span class="number">11</span>:<span class="number">0</span>:<span class="keyword">operator</span>:/root:/sbin/nologin</span><br></pre></td></tr></table></figure>

<p>每行以”:”分割成7个字段，每个字段的含义如下：</p>
<ul>
<li><p>第1个字段：为用户名(root就是用户名)，它是代表用户账号的字符申。用户名中的字符可以是大小写字母、数字、减号(不能为首位,不建议使用，容易造成混淆)、点(不建议使用，尤其是首位)或下划线</p>
</li>
<li><p>第2个字段：存放的是该账号的口令。早期的Unix系统口令确实存放在这里，但基于安全因素，后来就将其存放到/etc/shadow中了，这里只用x代替。</p>
</li>
<li><p>第3个字段：为一个数字，这个数字代表用户标识号，也称为uid。系统就是通过这个数字识别用户身份的。0就是root，可以修改test用户的uid为0，那么系统会认为root和test为同一个账户。uid的取值范围是0-65535(但实际上已经可以支持到429 496 729 4 ),0是超级用户(root )的标识号，CentOS 7的普通用户标识号从1000开始。自定义建立一个普通用户，会看到该账户的标识号是大于或等于1000的。</p>
</li>
<li><p>第4个字段：也是数字，表示组标识号，也称为gid。这个字段对应着/etc/group中的一条记录，其实/etc/group和/etc/passwd基本类似。</p>
</li>
<li><p>第5个字段：为注释说明，没有实际意义。通常记录该用户的一些属性，例如姓名、电话、地址等。可以使用chfn(不常用，此文不详解)命令来更改这些信息</p>
</li>
<li><p>第6个字段：为用户的家目录，当用户登录时，就处在这个目录下。root的家目录是/root，普通用户的家目录则为/home/usemame，用户家目录是可以自定义的。比如，建立一个普通用户test1，要想让tes1的家目录/data目录下，只要将/etc/passwd文件中对应该用户那行中的本字段修改为/data即可。</p>
</li>
<li><p>第7个字段：为用户的shell。用户登录后，要启动一个进程，用来将用户下达的指令传给内核，这就是shell。Linux的shell有sh、csh、ksh、tcsh、bash等多种，而Red Hat/CentOS的shell就是bash。查看/etc/passwd文件，该字段中除了/bin/bash，还有很多/sbin/nologin，它表示不允许该账号登录。如果想建立一个不允许登录的账号，可以把该字段改/sbin/nologin，默认是/bin/bash.</p>
</li>
</ul>
<h4 id="etc-shadow"><a href="#etc-shadow" class="headerlink" title="/etc/shadow"></a>/etc/shadow</h4><p>由：分割成9个字段，示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">.cat /etc/shadow ahead -n <span class="number">3</span></span><br><span class="line">root: $<span class="number">6</span>$QjKfxoVu$OAsBzIKnzEwst fsEvxEvtwgK4ZM76MzAG/MlloArh8rgvgKtvkDcCghHlKb9B7m1COBn5GqKZPqSaoYCtKhY/:<span class="number">17212</span>:<span class="number">0</span>:<span class="number">99999</span>:<span class="number">7</span>:::</span><br><span class="line">bin:*:<span class="number">17110</span>:<span class="number">0</span>:<span class="number">99999</span>:<span class="number">7</span>:::</span><br><span class="line">daemon:*:<span class="number">17110</span>:<span class="number">0</span>:<span class="number">99999</span>:<span class="number">7</span>:::</span><br></pre></td></tr></table></figure>
<p>每个字段的含义如下所示。</p>
<ul>
<li>第1个字段：为用户名，与/etc/passwd相同。</li>
<li>第2个字段：为用户密码。密码已经加密，但是有些黑客还是能够解密的。所以，将该文件属性设世为000，但root账户是可以访问或更改的。使用命令ls<br>-l查看该文件的权限，示例如下:<br><code># ls -l /etc/shadow
---------- 1 root root 1275 2月  18 11:31 /etc/shadow</code></li>
<li>第3个字段：为上次更改密码的日期，以1970年1月1日和上次更改密码的日期为基准计算而来。如，更改密码的日期为2012年1月1日，则这个值就是365*(2012-1970)+(2012-1970)/4+1=15341。如果是闰年，则有366天。</li>
<li>第4个字段：为要过多少天才可以更改密码，默认是0，即不受限制。</li>
<li>第5个字段：为密码多少天后到期，即在多少天内必须更改密码。例如，这里设置成30，则30天内必须更改一次密码；否则，将不能登录系统。默认是99999，可以理解为永远不需要改。</li>
<li>第6个字段：为密码到期前的警告期限。若这个值设置成7，则表示当7天后密码过期时，系统就发出警告，提醒用户他的密码将在7天后到期。</li>
<li>第7个字段：为账号失效期限。如果这个值设置为3，则表示密码已经到期，然而用户并没有在到期前修改密码，那么再过3天，这个账号便失效，即锁定。</li>
<li>第8个字段：为账号的生命周期。跟第3个字段一样，这个周期是按距离1970年1月1日多少天算的。它表示的含义是，账号在这个日期前可以使用，到期后账号将作废。</li>
<li>第9个字段：作为保留用的，没有什么意义。</li>
</ul>
<h3 id="用户和用户组管理"><a href="#用户和用户组管理" class="headerlink" title="用户和用户组管理"></a>用户和用户组管理</h3><h4 id="命令groupadd：新增组"><a href="#命令groupadd：新增组" class="headerlink" title="命令groupadd：新增组"></a>命令groupadd：新增组</h4><p>命令格式为</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">groupadd [-g GID] groupname</span><br></pre></td></tr></table></figure>
<p>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># groupadd grptest1</span></span><br><span class="line"><span class="meta"># tail -n1 /etc/group</span></span><br><span class="line">grptest1:x:<span class="number">1003</span>:</span><br></pre></td></tr></table></figure>

<p>如果不加-g选项，则按照系统默认的gid创建组。跟uid一样，gid也是从1000开始的。也可以自定义gid：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># groupadd -g 1008 grptest2</span></span><br><span class="line"><span class="meta"># tail -n2 /etc/group</span></span><br><span class="line">grptest1:x:<span class="number">1003</span>:</span><br><span class="line">grptest2:x:<span class="number">1008</span>:</span><br></pre></td></tr></table></figure>

<h4 id="命令groupdel：删除组"><a href="#命令groupdel：删除组" class="headerlink" title="命令groupdel：删除组"></a>命令groupdel：删除组</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># groupdel grptest2</span></span><br><span class="line"><span class="meta"># tail -n2 /etc/group</span></span><br><span class="line">user1:x:<span class="number">1002</span>:</span><br><span class="line">grptest1:x:<span class="number">1003</span>:</span><br></pre></td></tr></table></figure>

<p>有一种情况不能删除组，如user1组中包含user1账户，只有别除user1账户后才可以删除该组，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># groupdel user1</span></span><br><span class="line">groupdel：不能删除用户<span class="string">"user1"</span>的主组</span><br></pre></td></tr></table></figure>


<h4 id="命令useradd：增加用户"><a href="#命令useradd：增加用户" class="headerlink" title="命令useradd：增加用户"></a>命令useradd：增加用户</h4><p>命令格式为</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">useradd [-u UID] [-g GID] [-d HOME] [-M] [-s] username</span><br></pre></td></tr></table></figure>
<p>各个选项的具体含义如下。</p>
<ul>
<li>-U：表示自定义UID</li>
<li>-g：表示使新增用户属于已经存在的某个组，后面可以跟组id，也可以跟组名。</li>
<li>-d：表示自定义用户的家目录。</li>
<li>-M：表示不创建家目录。</li>
<li>-s：表示自定义shell</li>
</ul>
<p>下面我们先来新建一个用户test 10，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># useradd test10</span></span><br><span class="line"><span class="meta"># tail -n1 /etc/passwd</span></span><br><span class="line">testlO:x:<span class="number">1002</span>:<span class="number">1004</span>::/<span class="built_in">home</span>/test1O:/bin/bash</span><br><span class="line"><span class="meta"># tail -n1 /etc/group</span></span><br><span class="line">test10:x:<span class="number">1004</span>:</span><br></pre></td></tr></table></figure>

<p><code>如果useradd不加任何选项，直接跟用户名，则会创建一个跟用户名同名的组。</code>自定义uid, gid或者所属的组，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># useradd -u1005 -g 1006 -M -s /sbin/nologin user11</span></span><br><span class="line">useradd: <span class="string">"1006"</span>组不存在</span><br><span class="line"></span><br><span class="line"><span class="meta"># useradd -u1005 -g 1004 -M -s /shin/nologin user11</span></span><br><span class="line"><span class="meta"># useradd -u1006 -g grptest1 user12</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># tail -n2 /etc/passwd</span></span><br><span class="line">user11:x:<span class="number">1005</span>:<span class="number">1004</span>::/<span class="built_in">home</span>/user11:/sbin/nologin</span><br><span class="line">user12:x:<span class="number">1006</span>:<span class="number">1003</span>::/<span class="built_in">home</span>/user12:/bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta"># tail -n2 /etc/group</span></span><br><span class="line">grptest1:x:<span class="number">1003</span>:</span><br><span class="line">test10:x:<span class="number">1004</span>:</span><br></pre></td></tr></table></figure>
<p>加上-M选项后，则不建立用户家目录，但在etc/passwd文件中仍然有这个字段。如果你使用命令<code>ls /home/user11</code>查看一下，会提示该目录不存在。所以-M选项的作用只是不创建那个目录。示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># ls /home/user11</span></span><br><span class="line">ls：无法访问/<span class="built_in">home</span>/user11：没有那个文件或目录</span><br></pre></td></tr></table></figure>


<h4 id="命令userdel：删除用户"><a href="#命令userdel：删除用户" class="headerlink" title="命令userdel：删除用户"></a>命令userdel：删除用户</h4><p>命令格式为</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">userdel [-r] username</span><br></pre></td></tr></table></figure>
<p><code>-r选项的作用是，当删除用户时，一并删除该用户的家目录。</code><br>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># ls -Id /home/userl2</span></span><br><span class="line">drwx------ <span class="number">3</span> userl2 grptest1 <span class="number">4096</span> <span class="number">5</span>月  <span class="number">11</span> <span class="number">07</span>:<span class="number">12</span> /<span class="built_in">home</span>/userl2</span><br></pre></td></tr></table></figure>

<p>不加-r选项，则会直接删除用户user12，但保留其家目录，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># userdel userl2</span></span><br><span class="line"><span class="meta"># ls -ld /home/userl2       #此时userl2的家目录还在</span></span><br><span class="line">drwx------ <span class="number">3</span> userl2 grptest1 <span class="number">78</span> <span class="number">2</span>月  <span class="number">18</span> <span class="number">18</span>:<span class="number">46</span> /hone/userl2</span><br></pre></td></tr></table></figure>

<p>加上-r选项删除user1用户，如下所示:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># ls -ld /hone/users</span></span><br><span class="line">drwx------ <span class="number">3</span> user1 user1 <span class="number">78</span> <span class="number">2</span>月   <span class="number">18</span> <span class="number">11</span>:<span class="number">31</span> /<span class="built_in">home</span>/userl</span><br><span class="line"></span><br><span class="line"><span class="meta"># userdel  -r user1		#同时删除了user1的家目录</span></span><br><span class="line"><span class="meta"># ls -ld /home/usrel</span></span><br><span class="line">ls：无法访问/<span class="built_in">home</span>/userl：没有那个文件或目录</span><br></pre></td></tr></table></figure>


<h3 id="用户密码管理"><a href="#用户密码管理" class="headerlink" title="用户密码管理"></a>用户密码管理</h3><h4 id="命令passwd：设置密码"><a href="#命令passwd：设置密码" class="headerlink" title="命令passwd：设置密码"></a>命令passwd：设置密码</h4><p>账户创建后，密码默认为空，只有设置好密码后，才可以登录系统，建议按照如下规则设置密码：</p>
<ul>
<li>长度大于10个字符;</li>
<li>包含大小写字母、数字以及特殊字符中*、&amp;、%等;</li>
<li>不规则性(不要出现happy、love、linux、7758520、111111等单词或者数字);</li>
<li>密码中不要带有自己的名字、电话、生日以及公司名字等。</li>
</ul>
<p>命令格式为</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">passwd [username]</span><br></pre></td></tr></table></figure>
<p><code>该命令后面若不加用户名字，则是为自己设定密码</code>，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># passwd</span></span><br><span class="line">更改用户root的密码。</span><br><span class="line">新的密码：</span><br><span class="line">重新输入新的密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新.</span><br></pre></td></tr></table></figure>
<p>如果你登录的是root账户，后面可以跟普通账户的名字，意思是<code>修改指定账户的密码</code>，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># passwd user11</span></span><br><span class="line">更改用户user11的密码。</span><br><span class="line">新的密码：</span><br><span class="line">重新输入新的密码：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更新.</span><br></pre></td></tr></table></figure>
<p>注意：<code>只有root才可以修改其他账户的密码，普通账户只能修改自己的密码。</code></p>
<h4 id="命令mkpasswd：密码生成"><a href="#命令mkpasswd：密码生成" class="headerlink" title="命令mkpasswd：密码生成"></a>命令mkpasswd：密码生成</h4><p>有些Linux版本没有这个命令，需要安装一个expect软件包。安装如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># yum install -y expect</span></span><br><span class="line"><span class="meta"># mkpasswd</span></span><br><span class="line">HXut8oy*<span class="number">8</span></span><br></pre></td></tr></table></figure>

<p><code>指定长度的密码</code>，用mkpasswd命令也可以满足。比如，生成12位长度的密码，示例如下:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkpasswd -l 12</span></span><br><span class="line">j2zo9PlnM&#123;tq</span><br></pre></td></tr></table></figure>

<p><code>指定密码中有几个特殊字符或几个数字</code>，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># mkpasswd -1 12 -s 0 -d 3  #-s指定特殊字符的个数，-d指定数字的个数</span></span><br><span class="line">eu8e2fJ7sjtE</span><br></pre></td></tr></table></figure>

<p>只不过这密码不方便记忆，可借助KeePass工具来记录密码。</p>
<h3 id="用户身份切换"><a href="#用户身份切换" class="headerlink" title="用户身份切换"></a>用户身份切换</h3><p>Linux系统中，有些事情只有root用户才能做，普通用户是不能做的，这时就需要临时切换到root身份了。创建test账户，并修改其密码，使用test账户登录Linux了。操作如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># useradd test</span></span><br><span class="line"><span class="meta"># passwd test</span></span><br><span class="line">更改用户test的密码。</span><br><span class="line">新的密妈：</span><br><span class="line">重新输入新的密玛：</span><br><span class="line">passwd：所有的身份验证令牌已经成功更断。</span><br></pre></td></tr></table></figure>

<p>用test帐户登录Linux，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">login as: test</span><br><span class="line">test@<span class="number">192.168</span><span class="number">.188</span><span class="number">.128'</span>s password：</span><br><span class="line">$ whoami</span><br><span class="line">test</span><br></pre></td></tr></table></figure>
<p>登录后，使用whoami命令查看，发现当前用户是test。普通用户和root用户的shell提示符号有些区别，<code>root账户是 #，普通用户是 $</code></p>
<h4 id="命令su：切换用户身份"><a href="#命令su：切换用户身份" class="headerlink" title="命令su：切换用户身份"></a>命令su：切换用户身份</h4><p>命令su的格式为</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">su [-] username     </span><br><span class="line">#后面可跟-，也可不跟；加上-后，会初始化username用户的各种环境变量</span><br></pre></td></tr></table></figure>
<p><code>普通用户的su命令不加username时，就是切换到root用户</code>。当然，root用户同样可以使用su命令切换到普通用户，<code>当由root切换到普通用户时，不需要输入密码</code>。加与不加-的区别，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">$ pwd</span><br><span class="line">/<span class="built_in">home</span>/test</span><br><span class="line">$ su        #如果不加 <span class="string">"-"</span> 切换到root账户时，当前目录没有变化</span><br><span class="line">密码：      <span class="meta">#root账户切换到普通用户不加 <span class="meta-string">"-"</span>，当前目录也不会变化</span></span><br><span class="line"><span class="meta"># pwd</span></span><br><span class="line">/hone/test</span><br><span class="line"><span class="meta"># exit</span></span><br><span class="line">登出</span><br><span class="line">$ su -      #加上 <span class="string">"-"</span> 切换到root账户时，当前目录为root账户的家目录</span><br><span class="line">密码：      <span class="meta">#root切换到普通用户加上<span class="meta-string">"-"</span>，当前目录为当前用户的家目录</span></span><br><span class="line"><span class="meta"># pwd</span></span><br><span class="line">/root</span><br></pre></td></tr></table></figure>

<h4 id="命令sudo："><a href="#命令sudo：" class="headerlink" title="命令sudo："></a>命令sudo：</h4><p>为了避免当普通用户切换root时，密码泄露的安全问题，命令sudo诞生了。默认情况下，<code>只有root用户能使用sudo命令(需要输人密码，这个密码不是root的密码，而是用户自己的密码)</code>，普通用户想要使用sudo，是需要root预先设定的。可以使用visudo命令编辑/etc/sudoers配置文件(<code>必须使用root用户，如没有visudo这个命令，请使用命令yum install -y sudo安装</code>)，即输人i进人编辑模式，编辑完成后，按Esc键，再输人:wq完成保存。操作方法如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">## Allow root to <span class="built_in">run</span> any commands anywhere</span><br><span class="line">root    ALL=(ALL)	ALL     #默认root支持sudo的配置</span><br><span class="line">test    ALL=(ALL)	ALL     #加入让test用户拥有sudo的特权</span><br></pre></td></tr></table></figure>
<p>从左到右，<code>第一段test，为指定需要sudo特权的用户名</code>；<code>第二段ALL=(ALL)，左边的ALL指的是所有的主机，右边的ALL指的是获取哪个用户的身份，第二段几乎都不用配置</code>；<code>第三段ALL，设定可以使用sudo的命令有哪些。</code></p>
<p>验证test账户权限，如下操作在root账号下进行：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># su test</span></span><br><span class="line">$ ls    #当前目录是在/root下</span><br><span class="line">ls：无法打开目录.：权限不够</span><br><span class="line"><span class="meta"># sudo is</span></span><br><span class="line">We trust you have received the usual lecture from the local system </span><br><span class="line">Administrator. It usually boils down to these three things：</span><br><span class="line">    #<span class="number">1</span>) Respect the privacy of others.</span><br><span class="line">    #<span class="number">2</span>) Think before you type.</span><br><span class="line">    #<span class="number">3</span>) With great power comes great responsibility.</span><br><span class="line"></span><br><span class="line">[sudo]password <span class="keyword">for</span> test：</span><br><span class="line"><span class="number">123</span> <span class="number">456</span> anaconda-ks.cfg Desktop Documents Downloads initial-<span class="built_in">setup</span>-ks.cfg Music Pictures Public Templates Videos</span><br></pre></td></tr></table></figure>
<p>由于切换到test账户后当前目录还是/root, test账户没有任何权限，所以使用命令ls查看时，提示权限不够。然而使用命令sudo ls输入test账户自身的密码后，就有权限了。初次使用sudo命令时，会出现上面的一大段提示，当再次使用sudo命令时则不再提示。</p>
<p><code>统一给普通用户设置sudo特权</code>，可以加如下配置：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">%wheel ALL=(ALL) ALL</span><br></pre></td></tr></table></figure>
<p>意思是，<code>wheel这个组的所有用户都拥有了sudo的权利。接下来，只要把需要设置sudo权限的所有用户加人到wheel这个组中即可</code>。如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">## Allows people in group wheel to <span class="built_in">run</span> all commands</span><br><span class="line">%wheel  ALL=(ALL)       ALL</span><br></pre></td></tr></table></figure>
<p><code>配置文件/etc/sudoers包含了许多配置项，可以使用命令man sudoers来获得帮助信息。</code><br><code>实用案例：</code><br>把Linux服务器设置成，只允许使用普通账户登录，登录后可不输入密码，就能用sudo切换到root帐户。输入如下命令：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># visudo</span></span><br><span class="line"># 然后在文件的最后加人如下<span class="number">3</span>行:</span><br><span class="line">User_Alias USER_SU = test, test1, aming</span><br><span class="line">Cmnd Alias SU = /usr/bin/su</span><br><span class="line">USER_SU ALL=(ALL) NOPASSWD: SU</span><br></pre></td></tr></table></figure>

<ul>
<li>第一行：设定一个user别名，其实这个USER_SU相当于是test， test1和aming三个账户；</li>
<li>第二行：设定一个命令别名，SU相当于/usr/bin/su；</li>
<li>第三行：<code>第一段test，为指定需要sudo特权的用户名</code>；<code>第二段ALL=(ALL)，左边的ALL指的是所有的主机，右边的ALL指的是获取哪个用户的身份，第二段几乎都不用配置</code>；<code>第三段ALL，设定可以使用sudo的命令有哪些。</code></li>
</ul>
<p>保存后使用test, test1，aming这3个账户登录Linux。执行命令<code>sudo su -</code> 切换到root账户，获取root账户的所有权利，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># su - test</span></span><br><span class="line">$ sudo su -</span><br><span class="line"><span class="meta"># whoami</span></span><br><span class="line">root</span><br></pre></td></tr></table></figure>


<h4 id="不允许root直接登录Linux"><a href="#不允许root直接登录Linux" class="headerlink" title="不允许root直接登录Linux"></a>不允许root直接登录Linux</h4><p>不允许root直接远程登录Linux（默认允许root账户通过ssh远程登录Linux），只需要修改sshd服务的配置文件<code>/etc/ssh/sshd_config</code>，在文件中查找<code>#PennitRootLogin yes</code>并修改为<code>PermitRootLogin no</code>。保存配置后，需要重启sshd服务，如下所示:</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># systeectl restart sshd.service</span></span><br></pre></td></tr></table></figure>
<p><code>注意：只适用于通过ssh远程登录Linux的情况。</code></p>
<h2 id="文本编辑工具Vim"><a href="#文本编辑工具Vim" class="headerlink" title="文本编辑工具Vim"></a>文本编辑工具Vim</h2><p>Vi和Vim的最大区别就是编辑一个文本时Vi不会显示颜色，而Vim会显示颜色。Vim有3种模式：一般模式、编辑模式和命令模式<br><code>如果系统里没有Vim工具，可按如下方法安装：</code></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># yum install -y vim-enhanced</span></span><br></pre></td></tr></table></figure>


<h3 id="一般模式"><a href="#一般模式" class="headerlink" title="一般模式"></a>一般模式</h3><p>当使用命令<code>vim filename</code>编辑文件时，默认进人一般模式。常用操作如下：<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/23/p1Bs8SUvNWi6kzX.png" alt=""></p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/23/I7nRvzl2ZWiJ1KE.png" alt=""></p>
<h3 id="编辑模式"><a href="#编辑模式" class="headerlink" title="编辑模式"></a>编辑模式</h3><p>在一般模式下不可以修改某一个字符，如要修改字符，只能进人编辑模式。只需按<code>i、I、a、A、o、O、r和R中的某一个键即可进人编辑模式</code>。<br>当进人编辑模式时，在屏幕的尾行会显示INSERT或REPLACE的字样(若CentOS支持中文，则会显示”插人”)。<br>从编辑模式回到一般模式，只需按Esc键即可(<code>注：编辑文档回到一般模式后，还需进入命令模式保存文本或其他操作</code>)。常用操作如下：<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/23/QkLAPi5yvsOGwbh.png" alt=""></p>
<h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p>在一般模式下，<code>输入:或者/</code>即可进人命令模式。在该模式下，可以搜索某个字符或者字符串，也可以实现保存、替换、退出、显示行号等操作(<code>输入命令后，按回车即可执行</code>)。常用操作如下：<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/23/3wSrt1yBcTs5Q6Y.png" alt=""></p>
<p><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/23/Z7gHAv2ManYQEs6.png" alt=""></p>
<h2 id="文档压缩与打包"><a href="#文档压缩与打包" class="headerlink" title="文档压缩与打包"></a>文档压缩与打包</h2><p>在Linux下，不能识别.rar(Windows下)这种格式的压缩文件，它有自己独特的压缩工具。<code>但.zip格式的文件在Windows和Linux下都能使用</code>。</p>
<p>Linux下最常见的压缩文件通常都是.tar.gz格式的，除此之外，还有.tar、.gz、.bz2、.zip等格式。为了判断压缩文件是由哪种压缩工具所压缩的，而后才能正确地解压缩此文件。(<code>曾介绍过Linux下的文件后缀名无意义可加可不加，但为了便于区分，压缩文件最好加上后缀名</code>)常见压缩后缀名如下：</p>
<ul>
<li>.gz：表示由gzip压缩工具压缩的文件。</li>
<li>.bz2：表示由bzip2压缩下具压缩的文件。</li>
<li>.tar：表示由tar打包程序打包的文件(tar并没有压缩功能，只是把一个目录合并成一个文件)</li>
<li>.tar.gz：可以理解为先由tar打包，然后再由gzip压缩。</li>
<li>.tar.bz2：可以理解为先由tar打包.然后再由bzip2压缩。</li>
<li>.tar.xz：可以理解成先由tar打包.然后再xz压缩。</li>
</ul>
<h3 id="gzip压缩工具"><a href="#gzip压缩工具" class="headerlink" title="gzip压缩工具"></a>gzip压缩工具</h3><p>gzip命令的格式为<code>gzip [-d#] filename</code>，其中#为1-9的数字。<br><code>-d：该参数在解压缩时使用。
-#：表示压缩等级，1为最差，9为最好，6为默认(一般使用默认足矣)</code><br>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># gzip 1.txt</span></span><br><span class="line"><span class="meta">#gzip后直接跟文件名，表示在当前目录下压缩该文件，而原文件也会消失</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt.gz</span><br></pre></td></tr></table></figure>
<p>解压该压缩文件如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"># .gzip -d <span class="number">1.</span>txt.gz     #-d后面跟压缩文件表示解压压缩文件</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt</span><br></pre></td></tr></table></figure>
<p><code>gzip不支持压缩目录，压缩目录时会报错</code>，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"># .gzip test</span><br><span class="line">gzip: test is a directory -- ignored</span><br><span class="line"><span class="meta"># ls test</span></span><br><span class="line"><span class="number">1.</span>txt</span><br></pre></td></tr></table></figure>


<h3 id="bzip2压缩工具"><a href="#bzip2压缩工具" class="headerlink" title="bzip2压缩工具"></a>bzip2压缩工具</h3><p>bzip2命令的格式为<code>bzip2 [-dz] filename</code>，<code>只有-z(压缩)和-d(解压缩)两个常用选项</code>。压缩级别有1-9，默认级别是9。加或不加-z选项都可以压缩文件。示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd test</span></span><br><span class="line"># bzip2 <span class="number">1.</span>txt</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt.bz2</span><br><span class="line"># bzip2 -d <span class="number">1.</span>txt.bz2</span><br><span class="line"># bzip2 -z <span class="number">1.</span>txt</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt.bz2</span><br></pre></td></tr></table></figure>
<p><code>bzip2命令也不可以压缩目录，压缩目录时会报错</code>，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd..</span></span><br><span class="line"># bzip2 test</span><br><span class="line">bzip2: Input file test is a directory.</span><br></pre></td></tr></table></figure>


<h3 id="xz压缩工具"><a href="#xz压缩工具" class="headerlink" title="xz压缩工具"></a>xz压缩工具</h3><p>xz命令的格式为<code>xz [-dz] filename</code>，<code>常用的有-z(压缩)和-d(解压缩)这两个选项</code>。加或不加-z选项都可以压缩文件。示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"># bzip2 -d <span class="number">1.</span>txt.bz2</span><br><span class="line"><span class="meta"># xz 1.txt</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt.xz</span><br><span class="line"><span class="meta"># xz -d 1.txt.xz</span></span><br><span class="line"><span class="meta"># xz -z 1.txt</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt.xz</span><br></pre></td></tr></table></figure>
<p><code>xz命令同样也不可以压缩目录，压缩目录时会报错</code>，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd ..</span></span><br><span class="line"><span class="meta"># xz test</span></span><br><span class="line">test: Is a directory, skipping</span><br></pre></td></tr></table></figure>


<h3 id="tar打包工具"><a href="#tar打包工具" class="headerlink" title="tar打包工具"></a>tar打包工具</h3><p>tar可以把目录打包成一个文件，方便复制或者移动。该命令的格式为<code>tar [-zjJxcvfpP] filename.tar [filename]</code>，<code>filename.tar指打包或解压的文件名</code>，<code>filename指需要打包的目录或文件名(解压时不需要指定此属性)，如果有多个目录或文件，则以空格隔开</code>。<code>使用tar命令打包或解压后，原文件不会消失，但会覆盖当前相同已存在的文件或者目录</code>，常用选项如下：</p>
<ul>
<li>-z：表示同时用gzip压缩。</li>
<li>-j：表示同时用bzip2压缩。</li>
<li>-J：表示同时用xz压缩。</li>
<li>-x：表示解包或者解压编。</li>
<li>-t：表示查看tar包里的文件。</li>
<li>-c：表示建立一个tar包或者压缩文件包。</li>
<li>-v：表示可视化。</li>
<li>-f：后面跟文件名(-f filename)表示压缩后的文件名为filename，或者解压后的文件名为filename，<code>如果是多个参数组合的情况下，请把-f参数写到最后面</code>。</li>
<li>-p(小写)：表示使用原文件的属性，压缩前什么属性压编后还什么属性。(不常用)</li>
<li>-P(大写)：表示可以使用绝对路径。(不常用)</li>
<li>–exclude filename：表示在打包或压缩时，不要将filename文件包括在内。(不常用)</li>
</ul>
<p>示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cd test</span></span><br><span class="line"><span class="meta"># xz -d 1.txt.xz</span></span><br><span class="line"><span class="meta"># mkdir test111     #在test目录下建立test111目录</span></span><br><span class="line"><span class="meta"># touch test111/2.txt   #在test111目录下建立2.txt文件</span></span><br><span class="line"><span class="meta"># echo <span class="meta-string">"niha"</span> &gt; !$      #!$ 表示上一条命令的使用的路径，这里是指test111/2.txt</span></span><br><span class="line">echo <span class="string">"nihao"</span> &gt; test111/<span class="number">2.</span>txt</span><br><span class="line"><span class="meta"># cp 1.txt test111/</span></span><br><span class="line"><span class="meta"># yum install tree	#安装tree命令，用来查看树形结构目录</span></span><br><span class="line"><span class="meta"># tree .</span></span><br><span class="line">├----  <span class="number">1.</span>txt</span><br><span class="line">└----  test111</span><br><span class="line">      	├---- <span class="number">1.</span>txt</span><br><span class="line">        └---- <span class="number">2.</span>txt</span><br><span class="line"><span class="number">1</span> directory, <span class="number">3</span> files</span><br><span class="line"><span class="meta"># tar -cvf test111.tar test111  #把test111打包成test111.tar</span></span><br><span class="line">test111/            #加-v的可视化效果</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt  test111  test111.tar</span><br></pre></td></tr></table></figure>

<p><code>tar命令不仅可以打包目录，也可以打包文件</code>，打包时不加-v选项，表示不可视化。示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># rm -f test111.tar</span></span><br><span class="line"><span class="meta"># tar -cf test.tar test111 1.txt    #把test111和1.txt打包成test.tar</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt test111  test.tar</span><br></pre></td></tr></table></figure>
<p>覆盖当前相同已存在的文件或者目录，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># rm -rf test111</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt  test.tar</span><br><span class="line"><span class="meta"># tar -xvf test.tar</span></span><br><span class="line">test111/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br><span class="line"><span class="number">1.</span>txt           </span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt test111 test.tar      #此时test目录下的<span class="number">1.</span>txt，已被test.tar中的<span class="number">1.</span>txt覆盖了</span><br></pre></td></tr></table></figure>

<h4 id="exclude选项"><a href="#exclude选项" class="headerlink" title="exclude选项"></a>exclude选项</h4><p><code>排除文件的用法</code>，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># tar -cvf test111.tar --exclude 1.txt test111  </span></span><br><span class="line">test111/</span><br><span class="line">test1ll/<span class="number">2.</span>txt</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt test111 test111.tar test.tar</span><br></pre></td></tr></table></figure>

<p><code>排除目录的用法</code>，示例如下：<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/24/D3B5gnFKIOuHy8Z.png" alt=""></p>
<p><code>排除多个文件或目录的用法</code>，示例如下：<br><img src= "/img/loading.gif" data-src="https://i.loli.net/2020/09/24/mcqoDdp96z7YNjT.png" alt=""></p>
<p><code>注：exclude选项放在目标打包文件(或目录)名前面或者后着都可以</code></p>
<h4 id="使用gzip压缩"><a href="#使用gzip压缩" class="headerlink" title="使用gzip压缩"></a>使用gzip压缩</h4><p>tar命令非常好用的一个功能就是可以在打包时直接压缩，它支持gzip压缩、bzip2压缩和xz压缩。<code>使用-z选项，可以压缩成gzip格式的文件</code>，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># tar -czvf test111.tar.gz test111</span></span><br><span class="line">test111/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt  test111  test111.tar.gz  test.tar</span><br></pre></td></tr></table></figure>

<p><code>使用-tf选项，可以查看包或者压缩包的文件列表</code>，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># tar -tf test111.tar.gz</span></span><br><span class="line">test111/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">testili/<span class="number">1.</span>txt</span><br><span class="line"><span class="meta"># tar -tf test.tar</span></span><br><span class="line">testl11/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br><span class="line"><span class="number">1.</span>txt</span><br></pre></td></tr></table></figure>

<p>使用<code>-zxvf</code>选项，可以解压.tar.gz格式的压缩包，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># rm -rf test111</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt  test111.tar.gz  test.tar</span><br><span class="line">U tar -zxvf test111.tar.gz</span><br><span class="line">test111/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt  test111  test111.tar.gz  test.tar</span><br></pre></td></tr></table></figure>


<h4 id="使用bzip2压缩"><a href="#使用bzip2压缩" class="headerlink" title="使用bzip2压缩"></a>使用bzip2压缩</h4><p><code>使用-cjvf选项来压缩</code>，压缩过程如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># tar -cjvf test111.tar.bz2 test111</span></span><br><span class="line">test111/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line"><span class="number">1.</span>txt  test111  test111.tar.bz2  test111.tar.gz  test.tar</span><br></pre></td></tr></table></figure>


<p>使用<code>-tf</code>选项来查看压缩包的文件列表，示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># tar -tf test111.tar.bz2</span></span><br><span class="line">test111/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br></pre></td></tr></table></figure>

<p>使用<code>-jxvf</code>选项来解压.tar.bz2格式的压编包，示例命令如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># tar -jxvf test111.tar.bz2</span></span><br><span class="line">test111/</span><br><span class="line">test111/<span class="number">2.</span>txt</span><br><span class="line">test111/<span class="number">1.</span>txt</span><br></pre></td></tr></table></figure>


<p><code>注：打包的同时使用xz压缩工具压缩和gzip、bzip2相同，在此不再累述</code></p>
<h3 id="zip压缩工具"><a href="#zip压缩工具" class="headerlink" title="zip压缩工具"></a>zip压缩工具</h3><p><code>若CentOS没有压缩和解压缩命令，需要使用yum工具安装</code>，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># yun install -y zip</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># yun install -y unzip</span></span><br></pre></td></tr></table></figure>


<h4 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h4><p>zip压缩包可以压缩目录和文件，该命令的格式为<code>zip filename.tar filename</code>，<code>filename.tar指打包或解压的文件名</code>，<code>filename指需要打包的目录或文件名</code>，<code>压编目录时，需要指定目录下的文件</code>。示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># zip 1.txt.zip  1.txt</span></span><br><span class="line">adding: <span class="number">1.</span>txt (deflated <span class="number">64</span>%)</span><br></pre></td></tr></table></figure>

<p><code>zip命令仅仅是把二级目录本身压缩而已</code>。当目录下还有二级目录甚至更多级目录时，如果想要一并压缩二级目录下的文件，必须加上<code>-r</code>选项，如下所示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># zip -r test111.zip test111/</span></span><br><span class="line">updating: test111/ (stored <span class="number">0</span>%)</span><br><span class="line">updating: test111/<span class="number">1.</span>txt (deflated <span class="number">64</span>%)</span><br><span class="line">updating: test111/<span class="number">2.</span>txt (stored <span class="number">0</span>%)</span><br><span class="line">updating: test111/test222/ (stored <span class="number">0</span>%)</span><br></pre></td></tr></table></figure>
<p>也可以不加<code>-r</code>选项，而使用通配符*，如下所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># zip test111.zip test111&#x2F;*</span><br><span class="line">adding: test111&#x2F;1.txt (deflated 64%)</span><br><span class="line">adding: test111&#x2F;2.txt (stored 0%)</span><br><span class="line">adding: test111&#x2F;test222&#x2F; (stored 0%)</span><br></pre></td></tr></table></figure>
<p><code>注：使用-r选项和通配符*，压缩还是有区别的，看到亮点了嘛</code></p>
<h4 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h4><p>解压.zip格式文件时是用unzip命令。例如，解压1.txt.zip的命令为：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># unzip 1.txt.zip</span></span><br></pre></td></tr></table></figure>

<h3 id="zcat、bzcat命令"><a href="#zcat、bzcat命令" class="headerlink" title="zcat、bzcat命令"></a>zcat、bzcat命令</h3><p>使用-t选项可以查看tar压缩包的文件列表。对于gzip2或者bzip2压缩格式的文本文档，也可以使用zcat, bzcat命令直接查看文档内容。示例如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta"># cp /etc/passwd ./11.txt</span></span><br><span class="line"><span class="meta"># cp 11.txt 22.txt</span></span><br><span class="line"><span class="meta"># gzip 11.txt</span></span><br><span class="line"># bzip2 <span class="number">22.</span>txt</span><br><span class="line"><span class="meta"># zcat 11.txt.gz</span></span><br><span class="line"><span class="meta"># bzcat 22.txt.bz2</span></span><br></pre></td></tr></table></figure>



<!-- flag of hidden posts --></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:minkeyto@qq.com">灵熙云</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.goitman.cn/2020/09/11/Linux/">http://www.goitman.cn/2020/09/11/Linux/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.goitman.cn" target="_blank">灵熙云工作室</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2021/09/16/sZXckh2A83uMfVe.jpg" data-sites="wechat,weibo,qq,facebook,twitter"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><button class="reward-button" type="button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/file/wechat.jpg" alt="微信" onclick="window.open('/file/wechat.jpg')"/><div class="post-qr-code__desc">微信</div></li></ul></div></button></div><nav class="pagination-post" id="pagination"></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div class="comments-items-1" data-name="Valine"><div class="vcomment" id="vcomment"></div><script>function loadvaline () {  
  var requestSetting = function (from,set) {
    var from = from
    var setting = set.split(',').filter(function(item){
    return from.indexOf(item) > -1
    });
    setting = setting.length == 0 ? from :setting;
    return setting
  }

  var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
  var requiredFields = requestSetting(['nick','mail'],'nick,mail')

  function initValine () {
    window.valine = new Valine({
      el:'#vcomment',
      appId: 'eKp2wzPKybiFid4KXcVFcyMX-gzGzoHsz',
      appKey: 'RSA7FDJfrFwpawTfG1vE6R71',
      placeholder: 'minkeyto@qq.com',
      avatar: 'monsterid',
      meta: guestInfo,
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: false,
      requiredFields: requiredFields
    });
  }
  loadScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || false) {
  window.addEventListener('load', loadvaline)
}
else {
  function loadOtherComment () {
    loadvaline()
  }
}</script></div></div></div></article></main><footer id="footer" style="background-image: url(https://i.loli.net/2020/09/12/zX7IvHtJAscUmhe.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By 灵熙云</div><div class="framework-info"><span>Copyright Ⓒ 灵熙云工作室. All rights reserved.</span></div><div class="footer_custom_text">Hi, welcome to my blog !</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script defer id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = false;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/search/local-search.js"></script><script>if (document.getElementsByClassName('mermaid').length) {
  loadScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js',function () {
    mermaid.initialize({
      theme: 'default',
  })
})
}</script><script>var endLoading = function () {
  document.body.style.overflow = 'auto';
  document.getElementById('loading-box').classList.add("loaded")
}
window.addEventListener('load',endLoading)</script></body></html>